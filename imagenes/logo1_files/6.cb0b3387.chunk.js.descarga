(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[6],{1654:function(e,t,n){var a=n(1637),i=n(1638);e.exports=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.id=t.id,this.type=t.type,this.data=t.data,this.frame=t.frame,this.transform=t.transform}return i(e,[{key:"tableFormat",get:function(){return{}}}]),e}()},1663:function(e,t,n){},1664:function(e,t,n){},1665:function(e,t,n){},1770:function(e,t,n){"use strict";var a=n(64),i=n(67),o=n(65),s=n(66),r=n(1),c=n.n(r),l=(n(1771),function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).state={inputValue:i.props.value},i}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.title||"",n=this.state.inputValue,a=this.props.placeholder||"",i=this.props.onChange||function(){},o=this.props.maxChars,s=this.props.charactersText,r=n?n.length:0;return c.a.createElement("div",{className:"flex-textarea"},c.a.createElement("h5",{className:"title"},t),c.a.createElement("div",{className:"textarea-wrapper"},c.a.createElement("textarea",{ref:"textarea",tabIndex:1,value:n,placeholder:a,spellCheck:"false",autoComplete:"off",name:"Input",onChange:function(t){(!o||t.target.value.length<=o)&&(e.setState({inputValue:t.target.value}),i(t.target.value))}}),o&&c.a.createElement("div",{className:"char-counter ".concat(r===o?"max-reached":"")},r,"/",o," ",s)))}}]),n}(r.Component));t.a=l},1771:function(e,t,n){},1772:function(e,t,n){var a={get:n(215),concat:n(2176),min:n(2177),max:n(1173),filter:n(1166)},i=n(834).ConfigDigester,o=function(e,t,n,o,s){var r=i.extractVirtualFrame({frame:{origin:t,size:n},transform:{rotate:o}}),c=r.origin,l={x:r.origin.x+r.size.width,y:r.origin.y+r.size.height},d={x:Math.round((c.x+l.x)/2),y:Math.round((c.y+l.y)/2)},u={id:e,type:"edge",axis:"vertical",value:c.x,endPoints:[c.y,l.y]},h={id:e,type:"edge",axis:"horizontal",value:c.y,endPoints:[c.x,l.x]},f={id:e,type:"edge",axis:"vertical",value:l.x,endPoints:[c.y,l.y]},g={id:e,type:"edge",axis:"horizontal",value:l.y,endPoints:[c.x,l.x]},p=[{id:e,type:"center",axis:"vertical",value:d.x,endPoints:[c.y,l.y]},{id:e,type:"center",axis:"horizontal",value:d.y,endPoints:[c.x,l.x]}],m=[h,u,f,g],v=["ne","se","sw","nw"],b=["n","e","s","w"];if(v.indexOf(s)>=0){var E=[[f,h],[g,f],[u,g],[h,u]][(v.indexOf(s)+Math.floor(o/90))%4];return o%90!==0&&E.pop(),E}if(b.indexOf(s)>=0){var C=[[h,f],[f,g],[g,u],[u,h]][(b.indexOf(s)+Math.floor(o/90))%4];return o%90===0&&C.pop(),C}return"edge"===s?m:"center"===s?p:a.concat(m,p)};e.exports={getGuidelinesFromExisting:function(e,t){var n=e.size,i=o("canvas",{x:0,y:0},n);return t.forEach((function(e,t){var n=e.id,s=e.frame,r=s.origin,c=s.size,l=a.get(e,"transform.rotate")||0,d=o(n,r,c,l);i=a.concat(i,d)})),i},constructGuidelines:o,getMatchedGuidingLines:function(e,t,n,i){var o=[],s=[],r=void 0,c=void 0;return t.forEach((function(t){e.forEach((function(e){if(e.axis===t.axis){var l="vertical"===t.axis,d=l?r:c,u=Math.abs(d),h=e.value-t.value,f=Math.abs(h),g=function(){var n=a.concat(e.endPoints,t.endPoints),i=a.min(n),o=a.max(n);return{axis:e.axis,value:e.value,endPoints:[i,o],difference:h}};i&&f<=n?l?o.push(g()):s.push(g()):void 0===d&&f<=n?l?(r=h,o.push(g())):(c=h,s.push(g())):f<u?l?(r=h,o=[g()]):(c=h,s=[g()]):h===d&&(l?o.push(g()):s.push(g()))}}))})),a.concat(o,s)},getInfoWithMatchedGuidingLines:function(e){var t=void 0,n=a.filter(e,{axis:"vertical"});n.length&&(t=n[0].difference);var i=void 0,o=a.filter(e,{axis:"horizontal"});return o.length&&(i=o[0].difference),{magnitisedDeltaX:t,magnitisedDeltaY:i,verticalGuidingLines:n,horizontalGuidingLines:o}}}},1773:function(e,t){e.exports={MAX_BRAND_INFO_CHARS:280,MAX_SELECTIONS:3}},1777:function(e,t,n){"use strict";var a=n(64),i=n(67),o=n(65),s=n(66),r=n(1),c=n.n(r),l=n(85),d=n(123),u=n(338),h=n(738),f=n(1917),g=(n(1663),function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shouldShowBack,n=e.count;return c.a.createElement("div",{className:t?"floating-button back":"floating-button",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onClick:this.props.onClick},c.a.createElement("div",{className:t?"wrapper back":"wrapper"},c.a.createElement("i",{className:"fa fa-cube","aria-hidden":"true"}),c.a.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true"}),n&&c.a.createElement("span",{className:"badge"},n)))}}]),n}(r.Component)),p=n(60),m=n(808),v=(n(1664),n(906)),b=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"getTitleBlock",value:function(){var e=this.props.t;return c.a.createElement("p",{className:"title"},e("side-bar.title"))}},{key:"getLogoBlocks",value:function(e){var t=this,n=this.props.editingLogoId;return e.map((function(e,a){var i=m.a.getCanvasColor(e.layoutConfig);return c.a.createElement("div",{className:e.id===n?"logo-block active":"logo-block",key:a,onClick:function(){e.id!==n&&t.props.onSelectLogo(e)}},c.a.createElement(v.a,{svg:e.svg,backgroundColor:i,showWatermark:!0}))}))}},{key:"getMobileTitleBlock",value:function(){var e=this.props.t;return c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"header-label"},e("side-bar.title")),c.a.createElement("button",{className:"header-action-btn",onClick:this.props.onShowSavedLogos},e("navbar.back")))}},{key:"getMobileLogoBlocks",value:function(e){var t=this,n=this.props,a=n.t,i=n.isLoading,o=n.hasNextPage,s=this.props.editingLogoId;return c.a.createElement("div",{className:"logo-blocks"},e.map((function(e,n){var a=m.a.getCanvasColor(e.layoutConfig);return c.a.createElement("div",{className:e.id===s?"logo-block active":"logo-block",key:n,onClick:function(){e.id!==s&&t.props.onSelectLogo(e)}},c.a.createElement(v.a,{svg:e.svg,backgroundColor:a,showWatermark:!0}))})),o&&!i&&c.a.createElement("button",{className:"load-more-btn",onClick:this.props.onLoadMore},a("common.load-more")))}},{key:"render",value:function(){var e=this.props.t,t=this.props,n=t.active,a=t.logos,i=t.isLoading,o=t.hasNextPage,s=h.a.isMobile();return c.a.createElement("div",{className:n?"side-bar active":"side-bar"},s?this.getMobileTitleBlock():this.getTitleBlock(),s?this.getMobileLogoBlocks(a):this.getLogoBlocks(a),i&&c.a.createElement(p.a,null),o&&!i&&!s&&c.a.createElement("button",{className:"load-more-btn",onClick:this.props.onLoadMore},e("common.load-more")))}}]),n}(r.Component),E=Object(d.b)()(b),C=n(4),k=n(3),S=(n(1665),function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){var o;return Object(a.a)(this,n),(o=t.call(this,e,i)).state={hoverButton:!1,allowTooltip:!0,showSideBar:!1},o}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.resetSavedLogos()}},{key:"componentDidUpdate",value:function(e,t){this.props.currentUser.rehydrated&&this.props.currentUser.token&&this.fetchIfNeeded()}},{key:"toggleSideBar",value:function(){var e=this;this.setState((function(e){return{showSideBar:!e.showSideBar}}),(function(){e.state.showSideBar?e.setState({allowTooltip:!e.state.showSideBar}):setTimeout(function(){this.setState({allowTooltip:!this.state.showSideBar})}.bind(e),500)}))}},{key:"onLoadMore",value:function(){this.fetchSavedLogos()}},{key:"fetchIfNeeded",value:function(){this.props.currentUser.token&&(1!==this.props.saved.nextPage||this.props.saved.isLoading||this.fetchSavedLogos())}},{key:"fetchSavedLogos",value:function(){this.props.getSavedLogos({page:this.props.saved.nextPage,perPage:32})}},{key:"onSelectLogo",value:function(e){var t=Object(u.getBaseLocaleUrl)(this.props.i18n.language),n={logoId:e.id,config:JSON.parse(e.layoutConfig),purchased:e.purchased},a=window.open("".concat(C.default.appBaseUrl).concat(t,"edit"),"_blank");a?(a.editLogoConfig=JSON.stringify(n),a.shouldCloseTabOnBack=!0):(localStorage.setItem("editLogoConfig",JSON.stringify(n)),localStorage.setItem("shouldCloseTabOnBack",!0))}},{key:"getMyLogoSideBarContainerStyle",value:function(){var e=this.props.showSideBar,t=window.innerWidth;return{right:e?0:-(t<320?t:320)}}},{key:"render",value:function(){var e=this,t=this.props.t,n=h.a.isMobile(),a=n?this.props.showSideBar:this.state.showSideBar,i=this.state,o=i.hoverButton,s=i.allowTooltip,r=this.props.saved,l=r.isLoading,d=r.logos||[],u=r.total,p=r.nextPage<=r.totalPages,m=this.props.preCheckout.editingLogoId;return this.props.currentUser.token&&u?c.a.createElement("div",{className:"my-logo-side-bar-container damped-sliding",style:n?this.getMyLogoSideBarContainerStyle():{}},!n&&c.a.createElement(f.a,{id:"my-logo-side-bar-tooltip",title:t("side-bar.title"),open:o&&s,placement:"left"},c.a.createElement(g,{onMouseEnter:function(){e.setState({hoverButton:!0})},onMouseLeave:function(){e.setState({hoverButton:!1})},shouldShowBack:a,count:u,onClick:function(){e.toggleSideBar()}})),c.a.createElement(E,{active:a,logos:d,isLoading:l,hasNextPage:p,onLoadMore:this.onLoadMore.bind(this),onSelectLogo:this.onSelectLogo.bind(this),editingLogoId:m,onShowSavedLogos:this.props.onShowSavedLogos})):null}}]),n}(r.Component));t.a=Object(l.connect)((function(e){return{saved:e.profile.saved,currentUser:e.account.currentUser,preCheckout:e.preCheckout}}),(function(e){return{resetSavedLogos:function(){e(Object(k.Qc)())},setEditLogoConfig:function(t){e(Object(k.Vc)(t))},getSavedLogos:function(t){e(Object(k.Cc)(t))}}}))(Object(d.b)()(S))},1853:function(e,t,n){var a=n(834).ConfigDigester;e.exports=function(e,t){var n=a.extractComponentsFrame(t),i={frame:{origin:{x:0,y:0},size:{width:e.size.width,height:e.size.height}}};return a.areaOfIntersection(i,{frame:n})<=0}},1855:function(e,t,n){"use strict";var a=n(64),i=n(67),o=n(65),s=n(66),r=n(1),c=n.n(r),l=(n(2214),n(1801)),d=n(1776),u=n(736),h=n(123),f=n(1602),g=n(738),p=n(733),m=n.n(p),v=n(215),b=n.n(v),E={cloneDeep:m.a,get:b.a},C=g.a.isMobile(),k={root:{color:C?"#ffcb05":"#686AC9","&$checked":{color:C?"#ffcb05":"#686AC9"},width:36,height:36},checked:{},controlLabel:{margin:0},controlLabelText:{fontFamily:"'Ubuntu', sans-serif",color:C?"white":"rgba(0, 0, 0, 0.87)",lineHeight:"16px",fontSize:14}},S=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"handleCanvasColorChange",value:function(e){var t=E.cloneDeep(this.props.config.meta),n=e;t.canvasColor!==n&&(t.canvasColor=n,t.canvasColorInExport=!0,this.props.onMetaChange(t))}},{key:"toggleCanvasColorInExport",value:function(e){var t=E.cloneDeep(this.props.config.meta),n=e.target.checked;t.canvasColorInExport=n,n&&!t.canvasColor&&(t.canvasColor="ffffff"),this.props.onMetaChange(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,a=t.classes,i=t.config,o=E.get(i,"meta.canvasColor","ffffff"),s=E.get(i,"meta.canvasColorInExport",!1),r=n("edit-panel.background-in-export");return C&&(r+=" (".concat(n("home.pricing.plans.premium"),")")),c.a.createElement("div",{className:"background-color-control"},c.a.createElement(l.a,{control:c.a.createElement(d.a,{checked:s,onChange:function(t){e.toggleCanvasColorInExport(t)},classes:{root:a.root,checked:a.checked}}),label:r,classes:{root:a.controlLabel,label:a.controlLabelText}}),!C&&c.a.createElement("span",{className:"premium-label"},n("home.pricing.plans.premium")),c.a.createElement(f.a,{title:"",color:o,onChange:function(t){e.handleCanvasColorChange(t)},gradientDisabled:!0,anchorPosition:"bottom-right",onColorPopoverOpen:this.props.onColorPopoverOpen,onColorPopoverClose:this.props.onColorPopoverClose}))}}]),n}(r.Component);t.a=Object(u.a)(k)(Object(h.b)()(S))},1859:function(e,t,n){"use strict";var a=n(0),i=n(64),o=n(67),s=n(65),r=n(66),c=n(1),l=n.n(c),d=n(738),u=n(1098),h=n.n(u),f=n(224),g=n(1176),p=(n(2175),n(1177)),m={defaultCanvasSize:{width:535,height:331},minSideLength:20,magneticField:5,minDragDistance:2},v=n(1853),b=n.n(v),E=n(733),C=n.n(E),k=n(783),S=n.n(k),O=n(1099),w=n.n(O),y=n(900),M=n.n(y),x=n(1651),I=n.n(x),A=n(1082),D=n.n(A),j=n(1644),N=n.n(j),L={cloneDeep:C.a,forEach:S.a,indexOf:w.a,isEqual:M.a,includes:I.a,findIndex:D.a,delay:N.a},T=function(e){var t=L.cloneDeep(this.state.loadingIds);L.forEach(e,(function(e){var n=L.indexOf(t,e.id);n>=0&&!e.isLoading?t.splice(n,1):n<0&&e.isLoading&&t.push(e.id)})),L.isEqual(t,this.state.loadingIds)||this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{loadingIds:t})}))},R=function(e){this.setState((function(t){return Object(a.a)(Object(a.a)({},t),{},{guidingLines:e})}))},_=function(e){var t=this;if(L.isEqual(e,this.state.selectedIds))0===e.length&&this.props.onSelectComponents(e);else{if(!e.length){var n=this.state.stack.filter((function(e){return L.includes(t.state.selectedIds,e.id)})),a=[];n.forEach((function(e){b()(t.state.canvas,[e])&&a.push(e)})),a.length&&z.bind(this)(a)}this.props.onSelectComponents(e)}},z=function(e){this.props.onDeleteComponents(e)},B=function(e){this.setState((function(t){return Object(a.a)(Object(a.a)({},t),{},{panel:{padding:e}})}))},F=function(e){var t=e.dragSelectOrigin,n=e.dragSelectSize;this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{isDragSelecting:!0,dragSelectInfo:{origin:t||{x:-9999,y:-9999},size:n||{width:0,height:0}}})}))},P=function(){this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{isDragSelecting:!1,dragSelectInfo:null})}))},G=function(e){this.setState((function(t){return Object(a.a)(Object(a.a)({},t),{},{mouseDownOrigin:e})}))},U=function(e){var t=this,n=e.updatedStack,i=e.shouldPromptReport,o=e.userAction,s=L.cloneDeep(this.state.stack);n.forEach((function(e){var n=L.findIndex(s,{id:e.id});s[n]=e,i||L.includes(t.updatedIds,e.id)||t.updatedIds.push(e.id)})),this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{stack:s,dragInfo:e.isDragging?Object(a.a)(Object(a.a)({},e.dragInfo),{},{isDragged:!0}):null,resizeInfo:e.isResizing?Object(a.a)(Object(a.a)({},e.resizeInfo),{},{isResized:!0}):null,rotateInfo:e.isRotating?Object(a.a)(Object(a.a)({},e.rotateInfo),{},{isRotated:!0}):null})}),(function(){i&&t.props.onComponentsChange(s.filter((function(e){return L.findIndex(n,{id:e.id})>=0})).map((function(e){return e.reportFormat})),{userAction:o,keepCenter:!1})}))},W=function(e){var t=this,n=e.updatedStack,i=e.shouldPromptReport,o=e.userAction,s=L.cloneDeep(this.state.stack);n.forEach((function(e){var n=s.find((function(t){return e.id===t.id}));n&&(n.frame.origin=e.updatedOrigin,n.cachedData&&(n.cachedData.origin=e.updatedOrigin)),i||L.includes(t.updatedIds,n.id)||t.updatedIds.push(n.id)})),this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{stack:s,dragInfo:e.isDragging?Object(a.a)(Object(a.a)({},e.dragInfo),{},{isDragged:!0}):null})}),(function(){if(i){var e=new Date;t.updateComponentOriginTimestamp=e,L.delay((function(){t.updateComponentOriginTimestamp===e&&t.props.onComponentsChange(s.filter((function(e){return L.findIndex(n,{id:e.id})>=0})).map((function(e){return e.reportFormat})),{userAction:o,keepCenter:!1})}),200)}}))},X=function(e){this.setState((function(t){return Object(a.a)(Object(a.a)({},t),{},{latestKeyDown:e})}))},V=function(e){this.setState((function(t){return Object(a.a)(Object(a.a)({},t),{},{hoveringIds:e})}))},H=function(){this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{hoveringIds:[]})}))},Y=function(e){var t=e.draggingStack,n=this.state,i=n.stack,o=n.selectedIds,s=t||L.cloneDeep(i.filter((function(e){return L.includes(o,e.id)})));this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{isDragging:!0,dragInfo:{stack:s,isDragged:!1}})}))},K=function(){this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{isDragging:!1,dragInfo:null})}))},Z=function(e){var t=this,n=e.id,i=e.bbox,o=e.origin,s=this.state.stack,r=L.findIndex(s,{id:n}),c=s[r];i&&(c.cachedData.bbox=i),o&&(c.cachedData.origin=o),this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{stack:s})}),(function(){T.bind(t)([{id:n,isLoading:!1}])}))},q=function(e){var t=e.id,n=this.state.stack,i=L.findIndex(n,{id:t});n[i].cachedData={},this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{stack:n})}))},J=function(e){var t=this,n=e.id,i=e.frameSize,o=e.origin,s=e.bbox,r=L.cloneDeep(this.state.stack),c=L.findIndex(r,{id:n}),l=r[c];i&&(l.frame.size=i),o&&(l.frame.origin=o,l.cachedData.origin=o),s&&(l.cachedData.bbox=s),this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{stack:r})}),(function(){var e=new Date;t.updateTextComponentFrameSizeTimestamp=e,L.delay((function(){t.updateTextComponentFrameSizeTimestamp===e&&(t.props.onComponentsChange([l.reportFormat],{userAction:!1,keepCenter:!1}),T.bind(t)([{id:n,isLoading:!1}]))}),200)}))},Q=function(e){var t=this,n=e.id,i=e.frameSize,o=e.bbox,s=L.cloneDeep(this.state.stack),r=L.findIndex(s,{id:n}),c=s[r];c.frame.size=i,o&&(c.cachedData.bbox=o),this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{stack:s})}),(function(){t.props.onComponentsChange([c.reportFormat],{userAction:!1,keepCenter:!1}),T.bind(t)([{id:n,isLoading:!1}])}))},$=function(e){var t=e.mode,n=this.state,i=n.stack,o=n.selectedIds,s=L.cloneDeep(i.filter((function(e){return L.includes(o,e.id)})));this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{isResizing:!0,resizeInfo:{stack:s,mode:t}})}))},ee=function(){this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{isResizing:!1,resizeInfo:null})}))},te=function(){var e=this.state,t=e.stack,n=e.selectedIds,i=L.cloneDeep(t.filter((function(e){return L.includes(n,e.id)})));this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{isRotating:!0,rotateInfo:{stack:i}})}))},ne=function(){this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{isRotating:!1,rotateInfo:null})}))},ae=n(901),ie=n(902),oe=n(1772),se=n(834),re=n(913),ce=n(1735),le=n(2178),de=n.n(le),ue=n(2179),he=n(787),fe=n.n(he),ge=n(215),pe=n.n(ge),me={findIndex:D.a,cloneDeep:C.a,set:fe.a,get:pe.a,indexOf:w.a},ve=["se","sw","nw","ne"],be=["n","s","w","e"],Ee=["w","e"];var Ce=function(e){var t=this.state,n=t.canvas,a=t.mouseDownOrigin,i=t.stack,o=e.x-a.x,s=e.y-a.y,r=o/n.scale,c=s/n.scale,l=m.magneticField/n.scale,d=this.state.resizeInfo,u=d.stack,h=d.mode,f=me.cloneDeep(u),g=f[0],p=g.frame,v=p.origin,b=p.size,E=v.x+b.width/2,C=v.y+b.height/2,k=me.get(g,"transform.rotate")||0,S=de()(g,h),O=function(e){var t=["se","s","sw","w","nw","n","ne","e"];if(t.indexOf(e)>=0){var n=t.indexOf(e);return t[(n+4)%8]}return e}(h),w=de()(g,O),y=i.filter((function(e){return me.findIndex(f,{id:e.id})<0})),M=Object(oe.getGuidelinesFromExisting)(n,y),x=m.minSideLength,I=m.minSideLength;if(me.indexOf(ve,h)>=0){var A=Object(ue.getDeltaWithResizeMode)(r,c,h,k),D=A.deltaX,j=A.deltaY,N=0;N=b.width>b.height?x/b.width:I/b.height;var L=b.width+D,T=b.height+j,_=Math.max(L+T,0)/(b.width+b.height);_=Math.max(_,N);var z,B={width:b.width*_,height:b.height*_},F={x:w.x+(E-w.x)*_,y:w.y+(C-w.y)*_},P={x:F.x-B.width/2,y:F.y-B.height/2},G=Object(oe.constructGuidelines)("RESIZING",P,B,k,h);Object(oe.getMatchedGuidingLines)(M,G,l).forEach((function(e,t){var n;if("horizontal"===e.axis){var a=w.y-S.y;n=(w.y-e.value)/a}else{var i=w.x-S.x;n=(w.x-e.value)/i}if(z){var o=Math.abs(Math.abs(z)-Math.abs(_));Math.abs(Math.abs(n)-Math.abs(_))<o&&(z=n)}else z=n})),z||(z=_);var W={width:b.width*z,height:b.height*z},X={x:w.x+(E-w.x)*z,y:w.y+(C-w.y)*z},V={x:X.x-W.width/2,y:X.y-W.height/2};if(g.frame.size=W,g.frame.origin=V,"text"===g.type&&(g.data.fontSize*=z),me.get(g,"data.stroke.width")&&(g.data.stroke.width*=z),g.data.bbox&&(g.data.bbox=Object(ce.scaleBboxWithRatio)(g.data.bbox,z)),"text"===g.type){var H=me.get(g,"cachedData.bbox");H&&(g.cachedData.bbox=Object(ce.scaleBboxWithRatio)(H,z)),me.set(g,"cachedData.origin",g.frame.origin)}U.bind(this)({updatedStack:[g]});var Y=Object(oe.constructGuidelines)("RESIZING",V,W,k),K=Object(oe.getMatchedGuidingLines)(M,Y,.5,!0);R.bind(this)(K)}else if(me.indexOf(be,h)>=0){b.height>b.width?(x=1,I=4):(x=4,I=1);var Z=Object(ue.getDeltaWithResizeMode)(r,c,h,k),q=Z.deltaX,J=Z.deltaY,Q={width:Math.max(b.width+q,x),height:Math.max(b.height+J,I)},$=q?Q.width/b.width:Q.height/b.height,ee={x:w.x+(E-w.x)*$,y:w.y+(C-w.y)*$},te={x:ee.x-Q.width/2,y:ee.y-Q.height/2},ne=Object(oe.constructGuidelines)("RESIZING",te,Q,k,h),ae=Object(oe.getMatchedGuidingLines)(M,ne,l),ie=Object(oe.getInfoWithMatchedGuidingLines)(ae),se=ie.magnitisedDeltaX,le=ie.magnitisedDeltaY,he=0,fe=0;void 0===se&&void 0===le||(void 0!==se&&void 0!==le?(he=Math.abs(se)<=Math.abs(le)?se:0,fe=Math.abs(le)<Math.abs(se)?le:0):(he=se||0,fe=le||0),k%90!==0&&(Ee.indexOf(h)>=0?he?fe=he*Math.tan(Object(re.degreeToRadian)(k)):fe&&(he=fe/Math.tan(Object(re.degreeToRadian)(k))):he?fe=-he/Math.tan(Object(re.degreeToRadian)(k)):fe&&(he=-fe*Math.tan(Object(re.degreeToRadian)(k)))));var ge=r+he,pe=c+fe,Ce=Object(ue.getDeltaWithResizeMode)(ge,pe,h,k),ke=Ce.deltaX,Se=Ce.deltaY,Oe={width:Math.max(b.width+ke,x),height:Math.max(b.height+Se,I)},we=ke?Oe.width/b.width:Oe.height/b.height,ye={x:w.x+(E-w.x)*we,y:w.y+(C-w.y)*we},Me={x:ye.x-Oe.width/2,y:ye.y-Oe.height/2};f.forEach((function(e){e.frame.size=Oe,e.frame.origin=Me})),U.bind(this)({updatedStack:f});var xe=Object(oe.constructGuidelines)("RESIZING",Me,Oe,k),Ie=Object(oe.getMatchedGuidingLines)(M,xe,.5,!0);R.bind(this)(Ie)}},ke=n(2180),Se={findIndex:D.a,cloneDeep:C.a,set:fe.a,get:pe.a,indexOf:w.a},Oe=function(e){var t=this.state,n=t.canvas,a=t.mouseDownOrigin,i=t.stack,o=e.x-a.x,s=e.y-a.y,r=o/n.scale,c=s/n.scale,l=m.magneticField/n.scale,d=this.state.resizeInfo,u=d.stack,h=d.mode,f=Se.cloneDeep(u),g=se.ConfigDigester.extractComponentsFrame(f),p=g.origin,v=g.size,b=v.height/v.width,E=i.filter((function(e){return Se.findIndex(f,{id:e.id})<0})),C=Object(oe.getGuidelinesFromExisting)(n,E),k=m.minSideLength,S=m.minSideLength;if(Se.indexOf(["nw","ne","sw","se"],h)>=0){var O=Object(ke.getDeltaWithResizeMode)(r,c,h),w=O.deltaX,y=O.deltaY,M=0;M=v.width>v.height?k/v.width:S/v.height;var x=v.width+w,I=v.height+y,A=Math.max(x+I,0)/(v.width+v.height);A=Math.max(A,M);var D={width:v.width*A,height:v.height*A},j=v.width-D.width,N=v.height-D.height,L=Object(ke.getOriginChangeWithResizeMode)(j,N,h),T=L.originChangeX,_=L.originChangeY,z={x:p.x+T,y:p.y+_},B=Object(oe.constructGuidelines)("RESIZING",z,D,0,h),F=Object(oe.getMatchedGuidingLines)(C,B,l),P=Object(oe.getInfoWithMatchedGuidingLines)(F),G=P.magnitisedDeltaX,W=P.magnitisedDeltaY,X=P.verticalGuidingLines,V=P.horizontalGuidingLines,H=Object(ke.getDeltaWithResizeMode)(G,W,h),Y=H.deltaX,K=H.deltaY,Z=b;void 0!==Y&&void 0!==K?Z=Y?Math.abs(K/Y):100:void 0!==Y?Z=100:void 0!==K&&(Z=0);var q=A;Z>b?(F=X,q=(D.width+Y)/v.width):Z<b&&(F=V,q=(D.height+K)/v.height),q=Math.max(q,M),se.ConfigDigester.resizeComponents(f,{scale:q,anchor:Object(ke.getAnchorWithMode)(h)}),f.forEach((function(e){if(e.data.bbox&&(e.data.bbox=Object(ce.scaleBboxWithRatio)(e.data.bbox,q)),"text"===e.type){var t=Se.get(e,"cachedData.bbox");t&&(e.cachedData.bbox=Object(ce.scaleBboxWithRatio)(t,q)),Se.set(e,"cachedData.origin",e.frame.origin)}})),U.bind(this)({updatedStack:f});var J=se.ConfigDigester.extractComponentsFrame(f),Q=Object(oe.constructGuidelines)("RESIZING",J.origin,J.size,0,h),$=Object(oe.getMatchedGuidingLines)(C,Q,l);R.bind(this)($)}},we={findIndex:D.a,cloneDeep:C.a,set:fe.a,includes:I.a,indexOf:w.a,delay:N.a},ye=function(e){G.bind(this)(e)},Me=function(){var e=this.state,t=e.isDragSelecting,n=e.hoveringIds,a=e.isDragging,i=e.isResizing,o=e.isRotating,s=e.guidingLines;a&&K.bind(this)(),i&&ee.bind(this)(),s.length&&R.bind(this)([]),t&&(P.bind(this)(),n&&n.length&&(_.bind(this)(n),H.bind(this)())),o&&ne.bind(this)()},xe=function(e){var t=this.state,n=t.canvas,a=t.mouseDownOrigin,i=t.stack;if(a&&n){var o=e.x-a.x,s=e.y-a.y,r=o/n.scale,c=s/n.scale,l=m.magneticField/n.scale,d=this.state,u=d.isDragging,h=d.dragInfo;if(u){var f=h.stack,g=h.isDragged,p=se.ConfigDigester.extractComponentsFrame(f);if(!g){var v=Math.abs(o)>=m.minDragDistance,b=Math.abs(s)>=m.minDragDistance;if(!v&&!b)return}var E={x:p.origin.x+r,y:p.origin.y+c},C=Object(oe.constructGuidelines)("DRAGGING",E,p.size),k=i.filter((function(e){return we.findIndex(f,{id:e.id})<0})),S=Object(oe.getGuidelinesFromExisting)(n,k),O=Object(oe.getMatchedGuidingLines)(S,C,l),w=Object(oe.getInfoWithMatchedGuidingLines)(O),y=w.magnitisedDeltaX,M=void 0===y?0:y,x=w.magnitisedDeltaY,I=void 0===x?0:x,A={x:E.x+M,y:E.y+I},D=we.cloneDeep(f);se.ConfigDigester.translateComponents(D,{x:r+M,y:c+I}),W.bind(this)({updatedStack:D.map((function(e){return{id:e.id,updatedOrigin:e.frame.origin}}))});var j=Object(oe.constructGuidelines)("DRAGGING",A,p.size),N=Object(oe.getMatchedGuidingLines)(S,j,.5,!0);R.bind(this)(N)}var L=this.state,T=L.isResizing,_=L.resizeInfo;T&&(1===_.stack.length?Ce.bind(this)(e):Oe.bind(this)(e));var z=this.state,B=z.isDragSelecting,P=z.panel;if(B){var G=this.refs["work-station"].getBoundingClientRect(),X={x:(a.x-G.left-P.padding.horizontal)/n.scale,y:(a.y-G.top-P.padding.vertical)/n.scale},H={x:(e.x-G.left-P.padding.horizontal)/n.scale,y:(e.y-G.top-P.padding.vertical)/n.scale},Y={x:Math.min(X.x,H.x),y:Math.min(X.y,H.y)},K={width:Math.abs(X.x-H.x),height:Math.abs(X.y-H.y)};F.bind(this)({dragSelectOrigin:Y,dragSelectSize:K});var Z={frame:{origin:Y,size:K}},q=this.state.stack.filter((function(e){return se.ConfigDigester.areaOfIntersection(Z,e)>0}));V.bind(this)(q.map((function(e){return e.id})))}var J=this.state,Q=J.isRotating,$=J.rotateInfo;if(Q){var ee=$.stack,te=se.ConfigDigester.extractComponentsFrame(ee),ne={x:te.origin.x+te.size.width/2,y:te.origin.y+te.size.height/2},ae={x:ne.x*n.scale,y:ne.y*n.scale},ie=this.refs["work-station-content"].getBoundingClientRect(),ce={x:e.x-ie.left,y:e.y-ie.top},le=Object(re.getAngleWithTwoPoints)(ae,ce),de=Object(re.normalizedDegree)(Math.round(le+90)),ue=de%90;if((ue<3||ue>87)&&(de=ue<3?de-ue:de+(90-ue)),360===de&&(de=0),1===ee.length){U.bind(this)({updatedStack:ee.map((function(e){return we.set(e,"transform.rotate",de),e}))});var he=Object(oe.constructGuidelines)("ROTATING",te.origin,te.size),fe=i.filter((function(e){return we.findIndex(ee,{id:e.id})<0})),ge=Object(oe.getGuidelinesFromExisting)(n,fe),pe=Object(oe.getMatchedGuidingLines)(ge,he,.5,!0);R.bind(this)(pe)}}}},Ie=function(e){var t=this,n=ae.a.checkFeatureAvailable(this.props.featureList,ie.X),a=ae.a.checkFeatureAvailable(this.props.featureList,ie.W),i=e.keyCode,o=e.ctrlKey,s=e.metaKey,r=e.shiftKey,c=this.state,l=c.canvas,d=c.stack,u=c.selectedIds,h=we.cloneDeep(d),f=h.filter((function(e){return we.includes(u,e.id)})),g=se.ConfigDigester.extractComponentsFrame(f),p=new Date;X.bind(this)(p);var m=f.length&&we.indexOf([37,38,39,40],i)>=0,v=f.length&&we.indexOf([8,46],i)>=0,b=(o||s)&&!r&&90===i,E=(o||s)&&89===i||(o||s)&&r&&90===i;if(m&&n){e.preventDefault();var C=0,k=0;37===i?C=-1:38===i?k=-1:39===i?C=1:40===i&&(k=1);var S=5*l.scale,O=l.size.width-(g.origin.x+C),w=g.origin.x+C+g.size.width,y=l.size.height-(g.origin.y+k),M=g.origin.y+k+g.size.height;if(0!==C&&(O<S||w<S))return;if(0!==k&&(y<S||M<S))return;f.forEach((function(e){var t=e.frame.origin;e.frame.origin={x:t.x+C,y:t.y+k}}));var x=f.map((function(e){return{id:e.id,updatedOrigin:e.frame.origin}}));W.bind(this)({updatedStack:x,userAction:!0,shouldPromptReport:!0});var I=h.filter((function(e){return!we.includes(u,e.id)})),A=Object(oe.getGuidelinesFromExisting)(l,I),D=se.ConfigDigester.extractComponentsFrame(f),j=Object(oe.constructGuidelines)("group",D.origin,D.size),N=Object(oe.getMatchedGuidingLines)(A,j,.5,!0);R.bind(this)(N),we.delay((function(){t.state.latestKeyDown===p&&R.bind(t)([])}),800)}v&&a&&z.bind(this)(f),b&&(e.preventDefault(),this.props.onUndoChange()),E&&(e.preventDefault(),this.props.onRedoChange())},Ae=function(){var e=this.state,t=e.isDragging,n=e.isResizing;t||n||_.bind(this)([]),F.bind(this)({})},De=function(e){B.bind(this)(e)},je={includes:I.a},Ne=function(e){var t=this.state,n=t.isDragging,a=t.isDragSelecting,i=t.selectedIds,o=je.includes(i,e);n||a||o||V.bind(this)([e])},Le=function(e){var t=this.state,n=t.isDragging,a=t.isDragSelecting,i=t.selectedIds,o=je.includes(i,e);n||a||o||H.bind(this)()},Te=function(e){var t=this.state,n=t.selectedIds,a=t.isDragging,i=t.hoveringIds;je.includes(i,e.id)&&H.bind(this)(),je.includes(n,e.id)||_.bind(this)([e.id]);var o=ae.a.checkFeatureAvailable(this.props.featureList,ie.X);!a&&o&&Y.bind(this)({draggingStack:[e]})},Re=function(e){Z.bind(this)(e)},_e=function(e){q.bind(this)(e)},ze=function(e){T.bind(this)([e])},Be=function(e){J.bind(this)(e)},Fe=function(e){Q.bind(this)(e)},Pe=function(e){$.bind(this)(e)},Ge=function(e){ae.a.checkFeatureAvailable(this.props.featureList,ie.X)&&Y.bind(this)({})},Ue=function(){te.bind(this)()},We={canvas:{size:{width:535,height:331},scale:1},selectedIds:[],stack:[],panel:{padding:{horizontal:50,vertical:50}},loadingIds:[],hoveringIds:[],isDragSelecting:!1,dragSelectInfo:null,isResizing:!1,resizeInfo:null,isDragging:!1,dragInfo:null,isRotating:!1,rotateInfo:null,guidelines:[],guidingLines:[],mouseDownOrigin:null,latestKeyDown:null},Xe=n(2181),Ve=n(2215),He=n.n(Ve),Ye=n(123);function Ke(){var e=Object(g.a)(["\n  border: 0.5px solid #FFF065;\n  pointer-events: none;\n  position: absolute;\n\ttransform: rotateZ(0rad);\n\tz-index: 1000;\n"]);return Ke=function(){return e},e}var Ze=p.a.div.attrs({style:function(e){return{width:e.width,height:e.height,top:e.top,left:e.left}}})(Ke()),qe=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.panel,n=e.canvas,a=e.guidingLine,i=a.axis,o=a.value,s=a.endPoints,r=s[1]-s[0],c="horizontal"===i?r:0,d="vertical"===i?r:0,u="vertical"===i?s[0]:o,h="vertical"===i?o:s[0];return l.a.createElement(Ze,{className:"guiding-line",width:c*n.scale,height:d*n.scale,top:u*n.scale+t.padding.vertical,left:h*n.scale+t.padding.horizontal})}}]),n}(c.Component);function Je(){var e=Object(g.a)(["\n  border: 1px dashed white;\n  pointer-events: none;\n  position: absolute; \n  opacity: 0.2;\n  background-color: rgb(67, 91, 88);\n\tanimation: "," 0.3s;\n\tz-index: 1000;\n"]);return Je=function(){return e},e}function Qe(){var e=Object(g.a)(["\n  from { opacity: 0; }\n  to   { opacity: 0.2; }\n"]);return Qe=function(){return e},e}var $e={get:pe.a},et=Object(p.b)(Qe()),tt=p.a.div.attrs({style:function(e){return{width:e.width,height:e.height,top:e.top,left:e.left,transform:"rotateZ(".concat(e.rotate,"deg)"),WebkitTransform:"rotateZ(".concat(e.rotate,"deg)"),msTransform:"rotateZ(".concat(e.rotate,"deg)")}}})(Je(),et),nt=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.panel,n=e.canvas,a=e.hoveringElem,i=n.scale,o=a.frame.origin,s=o.x,r=o.y,c=a.frame.size,d=c.width,u=c.height,h=$e.get(a,"transform.rotate",0);return l.a.createElement(tt,{className:"highlight-frame",width:d*i,height:u*i,top:r*i+t.padding.vertical,left:s*i+t.padding.horizontal,rotate:h})}}]),n}(c.Component);n(2192);function at(){var e=Object(g.a)(["\n  width: 0px; \n  height: 16px;\n  position: absolute;\n  border: 1px dashed rgb(104, 106, 210);\n  pointerEvents: none\n"]);return at=function(){return e},e}function it(){var e=Object(g.a)(["\n  width: 0px; \n  height: 30px;\n  position: absolute;\n  border: 1px dashed rgb(104, 106, 210);\n  pointerEvents: none\n"]);return it=function(){return e},e}function ot(){var e=Object(g.a)(["\n  border-color: rgb(104, 106, 210);\n  background-color: #ffffff;\n"]);return ot=function(){return e},e}function st(){var e=Object(g.a)(["\n  border-radius: ","px;\n  border-color: rgb(255, 255, 255);\n  background-color: #686AC9;\n"]);return st=function(){return e},e}function rt(){var e=Object(g.a)(["\n  position: absolute;\n  opacity: 1;\n  z-index: 1;\n  display: block;\n  border-width: ","px\n  border-style: solid\n  box-sizing: border-box;\n  width: ","px;\n  height: ","px;\n  visibility: visible;\n  pointer-events: auto;\n"]);return rt=function(){return e},e}function ct(){var e=Object(g.a)(["\n  position: absolute;\n  border: 1px dashed #686AC9;\n  pointer-events: ",";\n"]);return ct=function(){return e},e}function lt(){var e=Object(g.a)(["\n  position: absolute;\n  width: 0px;\n  height: 0px;\n  z-index: 1000;\n  pointer-events: none;\n"]);return lt=function(){return e},e}var dt={get:pe.a},ut=d.a.isMobile(),ht=ut?16:12,ft=(ht+2)/2,gt=p.a.div.attrs({style:function(e){return{top:e.top,left:e.left}}})(lt()),pt=p.a.div.attrs({style:function(e){return{width:e.width,height:e.height,transform:"rotateZ(".concat(e.rotate,"deg)"),WebkitTransform:"rotateZ(".concat(e.rotate,"deg)"),msTransform:"rotateZ(".concat(e.rotate,"deg)")}}})(ct(),(function(e){return e.isMultipleSelection?"auto":"none"})),mt=p.a.div(rt(),2,ht,ht),vt=Object(p.a)(mt).attrs({style:function(e){return{top:e.top,left:e.left}}})(st(),ht/2),bt=Object(p.a)(mt).attrs({style:function(e){return{top:e.top,left:e.left}}})(ot()),Et=p.a.div.attrs({style:function(e){return{top:-30,left:e.left}}})(it()),Ct=p.a.div.attrs({style:function(e){return{top:e.top,left:e.left}}})(at()),kt=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"_handleMouseDown",value:function(e){e.stopPropagation(),this.props.onSelectedFrameAction({type:"selectedFrameMouseDown",info:null})}},{key:"_resizeMouseDown",value:function(e,t){t.stopPropagation(),this.props.onSelectedFrameAction({type:"resizeMouseDown",info:{mode:e}})}},{key:"_rotateMouseDown",value:function(e){e.stopPropagation(),this.props.onSelectedFrameAction({type:"rotateMouseDown",info:null})}},{key:"_handleTouchStart",value:function(e){this._handleMouseDown(e)}},{key:"_resizeTouchStart",value:function(e,t){this._resizeMouseDown(e,t)}},{key:"_rotateTouchStart",value:function(e){this._rotateMouseDown(e)}},{key:"getTextWidth",value:function(e,t){var n=(this.getTextWidth.canvas||(this.getTextWidth.canvas=document.createElement("canvas"))).getContext("2d");return n.font=t,n.measureText(e).width}},{key:"getCursor",value:function(e,t){var n=["se","s","sw","w","nw","n","ne","e"].indexOf(e),a=Object(re.normalizedDegree)(t+22.5);return["ldr","vr","rdr","hr","ldr","vr","rdr","hr"][(n+Math.floor(a/45))%8]}},{key:"render",value:function(){var e=this.props,t=e.resizable,n=e.rotatable,a=this.props,i=a.panel,o=a.canvas,s=a.selectedElem,r=a.isDragging,c=a.isResizing,d=a.isRotating,u=a.resizeInfo,h="group"===s.type,f=dt.get(s,"transform.rotate",0),g=s.frame.origin.x,p=s.frame.origin.y;s.frame.size.width,o.scale;if(r&&!0,c)switch(u.mode){case"se":g+=s.frame.size.width,p+=s.frame.size.height,s.frame.size.height*o.scale,!1;break;case"ne":g+=s.frame.size.width,!1;break;case"sw":p+=s.frame.size.height,s.frame.size.height*o.scale}g=Math.round(g),p=Math.round(p);"".concat(g,",").concat(p);var m=!1,v=!1,b=!1,E=!1,C=!1;t&&("shape"===s.type?(c&&!0,m=!0,v=!0,b=!0,E=!0,C=!0):"line"!==s.type?(c&&!0,m=!0):s.frame.size.width<s.frame.size.height?(v=!0,C=!0):(E=!0,b=!0));var k=ut&&"line"===s.type&&t&&n,S=f||0,O="".concat(S,"\xb0");return l.a.createElement(gt,{className:"selected-frame",top:s.frame.origin.y*o.scale+i.padding.vertical,left:s.frame.origin.x*o.scale+i.padding.horizontal},l.a.createElement(pt,{className:"cursor-move",width:s.frame.size.width*o.scale,height:s.frame.size.height*o.scale,onMouseDown:this._handleMouseDown.bind(this),onTouchStart:this._handleTouchStart.bind(this),isMultipleSelection:h,rotate:f},m&&l.a.createElement(vt,{kind:"nw",className:this.getCursor("nw",S),top:-ft,left:-ft,onMouseDown:this._resizeMouseDown.bind(this,"nw"),onTouchStart:this._resizeTouchStart.bind(this,"nw")}),m&&l.a.createElement(vt,{kind:"ne",className:this.getCursor("ne",S),top:-ft,left:-ft+s.frame.size.width*o.scale,onMouseDown:this._resizeMouseDown.bind(this,"ne"),onTouchStart:this._resizeTouchStart.bind(this,"ne")}),m&&l.a.createElement(vt,{kind:"sw",className:this.getCursor("sw",S),top:-ft+s.frame.size.height*o.scale,left:-ft,onMouseDown:this._resizeMouseDown.bind(this,"sw"),onTouchStart:this._resizeTouchStart.bind(this,"sw")}),m&&l.a.createElement(vt,{kind:"se",className:this.getCursor("se",S),top:-ft+s.frame.size.height*o.scale,left:-ft+s.frame.size.width*o.scale,onMouseDown:this._resizeMouseDown.bind(this,"se"),onTouchStart:this._resizeTouchStart.bind(this,"se")}),E&&l.a.createElement(bt,{kind:"w",className:this.getCursor("w",S),left:-ft,top:-ft+s.frame.size.height/2*o.scale,onMouseDown:this._resizeMouseDown.bind(this,"w"),onTouchStart:this._resizeTouchStart.bind(this,"w")}),b&&l.a.createElement(bt,{kind:"e",className:this.getCursor("e",S),left:-ft+s.frame.size.width*o.scale,top:-ft+s.frame.size.height/2*o.scale,onMouseDown:this._resizeMouseDown.bind(this,"e"),onTouchStart:this._resizeTouchStart.bind(this,"e")}),v&&l.a.createElement(bt,{kind:"n",className:this.getCursor("n",S),left:-ft+s.frame.size.width/2*o.scale,top:-ft,onMouseDown:this._resizeMouseDown.bind(this,"n"),onTouchStart:this._resizeTouchStart.bind(this,"n")}),C&&l.a.createElement(bt,{kind:"s",className:this.getCursor("s",S),left:-ft+s.frame.size.width/2*o.scale,top:-ft+s.frame.size.height*o.scale,onMouseDown:this._resizeMouseDown.bind(this,"s"),onTouchStart:this._resizeTouchStart.bind(this,"s")}),n&&l.a.createElement(Et,{left:s.frame.size.width/2*o.scale},l.a.createElement("div",{kind:"rotate",className:"cursor-rotate",style:{position:"absolute",width:20,height:20,borderRadius:10,background:"rgb(255, 255, 255)",visibility:"visible",marginLeft:-10,top:-20,pointerEvents:"auto"},onMouseDown:this._rotateMouseDown.bind(this),onTouchStart:this._rotateMouseDown.bind(this)},l.a.createElement("svg",{width:"14",height:"14",viewBox:"0 0 15 14",style:{position:"absolute",left:"50%",top:"50%",marginLeft:-7,marginTop:-7}},l.a.createElement("path",{fill:"#4B596E",d:"M12.378,10.467L15,6.489h-1.384c-0.26-3.254-2.961-5.752-6.297-5.752c-1.688,0-3.276,0.651-4.47,1.834 C1.657,3.754,1,5.327,1,7c0,3.453,2.835,6.263,6.32,6.263c1.425,0,2.77-0.461,3.891-1.33l0.315-0.244l-1.521-1.609l-0.262,0.191 c-0.706,0.516-1.546,0.787-2.423,0.787c-2.257,0-4.096-1.822-4.096-4.061c0-2.24,1.837-4.063,4.096-4.063 c2.094,0,3.811,1.532,4.063,3.551H9.759L12.378,10.467z"})),d&&l.a.createElement("div",{style:{position:"absolute",fontFamily:"roboto",fontSize:14,fontWeight:"regular",top:-2*ht,left:-ft,color:"#5b616b",width:40,textAlign:"center",transform:"rotateZ(-".concat(S,"deg)"),WebkitTransform:"rotateZ(-".concat(S,"deg)"),msTransform:"rotateZ(-".concat(S,"deg)")}},O))),k&&l.a.createElement(Ct,{top:s.frame.size.height*o.scale,left:s.frame.size.width/2*o.scale},l.a.createElement("div",{kind:"rotate",className:"cursor-dragndrop",style:{position:"absolute",width:20,height:20,borderRadius:10,background:"rgb(255, 255, 255)",visibility:"visible",marginLeft:-10,bottom:-20,pointerEvents:"auto"},onMouseDown:this._handleMouseDown.bind(this),onTouchStart:this._handleTouchStart.bind(this)},l.a.createElement("svg",{width:"14",height:"14",viewBox:"0 0 1024 1024",style:{position:"absolute",left:"50%",top:"50%",marginLeft:-7,marginTop:-7}},l.a.createElement("path",{fill:"#333333",d:"M1019.29412 500.853792l-169.529986-169.529986a15.55321 15.55321 0 0 0-26.440456 10.887247v118.204394h-259.220163v-259.220163h117.685954a15.55321 15.55321 0 0 0 10.887247-26.958896L523.146729 4.706401a15.55321 15.55321 0 0 0-22.292934 0L331.323809 174.236388a15.55321 15.55321 0 0 0 10.887247 26.958896h118.204394v259.220163h-259.220162V342.211053a15.55321 15.55321 0 0 0-26.958897-10.887247L4.706404 500.853792a15.55321 15.55321 0 0 0 0 22.292934l169.529987 169.529986a15.55321 15.55321 0 0 0 26.958897-10.887246v-117.685954h259.220162v259.220162H342.211056a15.55321 15.55321 0 0 0-10.887247 26.440457l169.529986 169.529986a15.55321 15.55321 0 0 0 22.292934 0l169.529987-169.529986a15.55321 15.55321 0 0 0-10.887247-26.440457h-117.685954v-259.220162h259.220163v117.685954a15.55321 15.55321 0 0 0 26.440456 10.887246l169.529986-169.529986a15.55321 15.55321 0 0 0 0-22.292934z"})))),null))}}]),n}(c.Component),St=n(1824),Ot=n(1823),wt=n(1647);function yt(){var e=Object(g.a)(["\n  user-select: none;\n  position: absolute;\n  background: ",";\n"]);return yt=function(){return e},e}var Mt={get:pe.a},xt=p.a.div.attrs({style:function(e){return{width:e.width,height:e.height}}})(yt(),(function(e){return e.backgroundColor})),It=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.canvas,a=t.elem,i=n.scale,o=a.frame.size,s=o.width,r=o.height,c=a.data.tintColor;if("string"===typeof c)e="#".concat(c);else if("object"===typeof c){var d=Object(re.normalizedDegree)(c.degree),u=Mt.get(a,"transform.flip",{h:!1,v:!1});u.h&&(d=-d),u.v&&(d=180-d),e="linear-gradient(\n        ".concat(d+180,"deg, \n        #").concat(c.stack[0].color," ").concat(100*c.stack[0].offset,"%, \n        #").concat(c.stack[1].color," ").concat(100*c.stack[1].offset,"%\n      )")}else e="#000000";return l.a.createElement(wt.a,{canvas:n,elem:a,onBaseComponentAction:this.props.onBaseComponentAction},l.a.createElement(xt,{className:"line-component",width:s*i,height:r*i,backgroundColor:e}))}}]),n}(c.Component),At=n(1825);function Dt(){var e=Object(g.a)(["\n  border: 1px solid black;\n  pointer-events: none;\n  position: absolute;\n  opacity: 0.2;\n  background-color: #888888;\n\ttransform: rotateZ(0rad);\n\tz-index: 1000;\n"]);return Dt=function(){return e},e}var jt=p.a.div.attrs({style:function(e){return{top:e.top,left:e.left,width:e.width,height:e.height}}})(Dt()),Nt=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.dragSelectInfo,n=e.canvas,a=e.panel;return l.a.createElement(jt,{className:"drag-select-frame",width:t.size.width*n.scale,height:t.size.height*n.scale,top:t.origin.y*n.scale+a.padding.vertical,left:t.origin.x*n.scale+a.padding.horizontal})}}]),n}(c.Component),Lt=n(51),Tt=n(2193),Rt=n.n(Tt),_t=(n(2208),n(2209),n(2210),n(2211)),zt=n.n(_t),Bt=n(1745),Ft=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"handleArticleClick",value:function(e){Lt.a.submitSelectContentEvent("article",e),window.open(e,"_blank")}},{key:"getSliderSlides",value:function(){var e=this,t=this.props.editingTips;if(t){var n=[];return t.forEach((function(t,a){n.push(l.a.createElement("div",{className:"slide",key:a},l.a.createElement("div",{className:"slide-content"},l.a.createElement("div",{className:"editing-tips"},l.a.createElement("div",{className:"article-container"},l.a.createElement("div",{className:"tips-article",onClick:e.handleArticleClick.bind(e,t.info.contentUrl),key:a},l.a.createElement("div",{className:"article-image",style:{backgroundImage:"url(".concat(t.info.imageUrl,")")}}),l.a.createElement("div",{className:"article-details"},l.a.createElement("div",{className:"article-title"},t.info.title),l.a.createElement("div",{className:"article-description"},t.info.desc),l.a.createElement("div",{className:"bottom-cover"}))))))))})),n}return l.a.createElement("div",{className:"slide"})}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,a=t.isShowingTipsCarousel,i={className:"adsSlider",dots:!1,infinite:!0,speed:1e3,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:1e4,pauseOnHover:!0,arrows:!0,swipe:!1},o=!(t.menuItem===Bt.f)&&a,s="carousel-container damped-sliding";return o||(s+=" hide-carousel"),l.a.createElement("div",{className:s},l.a.createElement("div",{className:"editing-tips-header"},l.a.createElement("div",{className:"header-title"},n("edit-panel.tips.editing-tips")),l.a.createElement("div",{className:"header-more",onClick:function(){return e.props.onMenuClick(Bt.f)}},n("common.load-more"))),l.a.createElement(Rt.a,i,this.getSliderSlides()),l.a.createElement("div",{className:"toggle-button",onClick:this.props.onToggleButtonClick},o?l.a.createElement(zt.a,null):l.a.createElement("i",{className:"fa fa-lightbulb-o","aria-hidden":"true"})))}}]),n}(c.Component),Pt=Object(Ye.b)()(Ft),Gt=(n(2212),function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.content;return l.a.createElement("div",{className:"editing-alert-view"},l.a.createElement("p",null,e))}}]),n}(c.Component)),Ut=n(1726),Wt=n(1803),Xt=n(1804),Vt=(n(2213),function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props.t;return l.a.createElement("div",{className:"logo-assistant-button"},l.a.createElement("div",{className:"item-button-icon",onClick:function(){return e.props.onClick()}},l.a.createElement("i",{className:"fa fa-magic","aria-hidden":"true"}),l.a.createElement("p",null,t("side-bar.logo-assistant.cta"))))}}]),n}(c.Component)),Ht=Object(Ye.b)()(Vt),Yt=n(1855),Kt=n(1081),Zt=n.n(Kt);function qt(){var e=Object(g.a)(["\n  pointer-events: none;\n"]);return qt=function(){return e},e}function Jt(){var e=Object(g.a)(["\n  z-index: 1;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-image: ",";\n  background-size: contain;\n  pointer-events: none;\n"]);return Jt=function(){return e},e}var Qt={cloneDeep:C.a,includes:I.a,find:Zt.a,isEqual:M.a,get:pe.a},$t=p.a.div(Jt(),(function(e){return e.shouldShowWatermark?"url(/watermark.png)":"none"})),en=p.a.div(qt()),tn=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(e){var o;Object(i.a)(this,n),(o=t.call(this,e)).updatePanelPadding=function(){var e=o.refs["work-station"].getBoundingClientRect(),t=o.refs["work-station-content"].getBoundingClientRect();De.bind(Object(f.a)(o))({vertical:t.top-e.top,horizontal:t.left-e.left})};var s=e.config?Object(Xe.getStackFromConfig)(Qt.cloneDeep(e.config.components)):[],r=e.selectedComponents?e.selectedComponents.map((function(e){return e.id})):[],c=e.canvasSize||m.defaultCanvasSize,l=e.currentScale||1;return o.state=Object(a.a)(Object(a.a)({},We),{},{stack:s,selectedIds:r,canvas:{size:c,scale:l}}),o.updatedIds=[],o.windowResizeTimestamp=null,o.isInitUpdated=!1,o}return Object(o.a)(n,[{key:"preventPullToRefresh",value:function(e){document.querySelector("body").style["overscroll-behavior"]="none";var t=!1;document.querySelector(e).addEventListener("touchstart",(function(e){if(1===e.touches.length){var n=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;t=0===n}})),document.querySelector(e).addEventListener("touchmove",(function(e){t&&(t=!1,e.preventDefault())}))}},{key:"releasePullToRefresh",value:function(){document.querySelector("body").style["overscroll-behavior"]="auto"}},{key:"componentWillReceiveProps",value:function(e,t){var n=this,i=(e.config?Object(Xe.getStackFromConfig)(Qt.cloneDeep(e.config.components)):[]).map((function(e){if(Qt.includes(n.state.loadingIds,e.id)){var t=Qt.find(n.state.stack,{id:e.id});e.frame=t.frame}return e}));if(!Object(Xe.isSameStack)(i,this.state.stack)){var o=Object(Xe.inheritCacheFromOldStack)(i,this.state.stack);this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{stack:o})}))}var s=e.selectedComponents?e.selectedComponents.map((function(e){return e.id})):[];Qt.isEqual(this.state.selectedIds,s)||this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{selectedIds:s})}));var r=e.canvasSize||m.defaultCanvasSize;Qt.isEqual(this.state.canvas.size,r)||this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{canvas:Object(a.a)(Object(a.a)({},e.canvas),{},{size:r})})}),(function(){n.handleWindowResize()}));var c=e.currentScale||1;Qt.isEqual(this.state.canvas.scale,c)||this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{canvas:Object(a.a)(Object(a.a)({},e.canvas),{},{scale:c})})}),(function(){n.handleWindowResize()}))}},{key:"componentDidUpdate",value:function(e,t){if(t.isDragging&&!this.state.isDragging&&t.dragInfo.isDragged){var n=this.state,a=n.canvas,i=n.stack;if(t.dragInfo.stack.length){var o=t.dragInfo.stack.map((function(e){return e.id})),s=i.filter((function(e){return Qt.includes(o,e.id)}));if(b()(a,s))return z.bind(this)(s),void(this.updatedIds=[])}this.notifyUpdatedComponents()}t.isResizing&&!this.state.isResizing&&t.resizeInfo.isResized&&this.notifyUpdatedComponents(),t.isRotating&&!this.state.isRotating&&t.rotateInfo.isRotated&&this.notifyUpdatedComponents(),this.isInitUpdated||(this.isInitUpdated=!0)}},{key:"componentWillMount",value:function(){this.subscribeEventListeners()}},{key:"componentWillUnmount",value:function(){this._ismounted=!1,this.unsubscribeEventListeners(),this.releasePullToRefresh()}},{key:"subscribeEventListeners",value:function(){this._handleWindowResize=this.handleWindowResize.bind(this),this._handleMouseDown=this.handleMouseDown.bind(this),this._handleMouseUp=this.handleMouseUp.bind(this),this._handleMouseMove=this.handleMouseMove.bind(this),this._handleKeyDown=this.handleKeyDown.bind(this),this._handleTouchStart=this.handleTouchStart.bind(this),this._handleTouchEnd=this.handleTouchEnd.bind(this),this._handleTouchMove=this.handleTouchMove.bind(this),window.addEventListener("resize",this._handleWindowResize,!1),document.addEventListener("mousedown",this._handleMouseDown,!1),document.addEventListener("mouseup",this._handleMouseUp,!1),document.addEventListener("mousemove",this._handleMouseMove,!1),document.addEventListener("keydown",this._handleKeyDown,!1),document.addEventListener("touchstart",this._handleTouchStart,!1),document.addEventListener("touchend",this._handleTouchEnd,!1),document.addEventListener("touchmove",this._handleTouchMove,!1)}},{key:"unsubscribeEventListeners",value:function(){window.removeEventListener("resize",this._handleWindowResize,!1),document.removeEventListener("mousedown",this._handleMouseDown,!1),document.removeEventListener("mouseup",this._handleMouseUp,!1),document.removeEventListener("mousemove",this._handleMouseMove,!1),document.removeEventListener("keydown",this._handleKeyDown,!1),document.removeEventListener("touchstart",this._handleTouchStart,!1),document.removeEventListener("touchend",this._handleTouchEnd,!1),document.removeEventListener("touchmove",this._handleTouchMove,!1)}},{key:"componentDidMount",value:function(){var e=this;this._ismounted=!0;var t=this.props.t,n=this.refs["work-station"],a=d.a.isMobile(),i=ae.a.checkFeatureAvailable(this.props.featureList,ie.F);(function t(){!function(){var t=n.getBoundingClientRect();return!!e.isInitUpdated&&(a?t.top>40:t.left>430)}()?setTimeout(function(){this._ismounted&&t.bind(this)()}.bind(this),50):this.handleWindowResize()}).bind(this)(),a&&i&&window.alert(t("edit-panel.tips.editing-alert"));var o=d.a.isFireFox()&&a,s=d.a.isIOSFireFox();a&&!(o&&!s)&&this.preventPullToRefresh(".viewer-panel")}},{key:"handleWindowResize",value:function(){if(this.updatePanelPadding(),d.a.isMobile()){var e=this,t=new Date;this.windowResizeTimestamp=t,setTimeout((function(){e.windowResizeTimestamp===t&&e.updatePanelPadding()}),50)}}},{key:"handleKeyDown",value:function(e){"INPUT"===e.target.nodeName||Ie.bind(this)(e)}},{key:"notifyUpdatedComponents",value:function(){var e=this,t=this.state.stack.filter((function(t){return Qt.includes(e.updatedIds,t.id)})).map((function(e){return e.reportFormat}));this.props.onComponentsChange(t,{userAction:!0}),this.updatedIds=[]}},{key:"handleMouseDown",value:function(e){ye.bind(this)({x:e.clientX,y:e.clientY})}},{key:"handleMouseUp",value:function(){Me.bind(this)()}},{key:"handleMouseMove",value:function(e){xe.bind(this)({x:e.clientX,y:e.clientY})}},{key:"handleTouchStart",value:function(e){var t=e.targetTouches[0].clientX,n=e.targetTouches[0].clientY;ye.bind(this)({x:t,y:n})}},{key:"handleTouchEnd",value:function(){Me.bind(this)()}},{key:"handleTouchMove",value:function(e){var t=e.targetTouches[0].clientX,n=e.targetTouches[0].clientY;xe.bind(this)({x:t,y:n})}},{key:"_onMouseDown",value:function(){Ae.bind(this)()}},{key:"handleBaseComponentAction",value:function(e){var t=e.type,n=e.info;switch(t){case"mouseEnter":Ne.bind(this)(n);break;case"mouseLeave":Le.bind(this)(n);break;case"mouseDown":Te.bind(this)(n)}}},{key:"handleTextComponentAction",value:function(e){var t=e.type,n=e.info;switch(t){case"updateCache":Re.bind(this)(n);break;case"removeCache":_e.bind(this)(n);break;case"updateLoading":ze.bind(this)(n);break;case"updateFrameSize":Be.bind(this)(n);break;case"updateFontSize":Fe.bind(this)(n)}}},{key:"handleSelectedFrameAction",value:function(e){var t=e.type,n=e.info;switch(t){case"resizeMouseDown":Pe.bind(this)(n);break;case"selectedFrameMouseDown":Ge.bind(this)();break;case"rotateMouseDown":Ue.bind(this)()}}},{key:"getViewerPanelBoundingRect",value:function(){var e=this.refs["work-station-content"];return e?{top:e.offsetTop,left:e.offsetLeft,width:e.clientWidth,height:e.clientHeight}:null}},{key:"getAutoCenterButtonSize",value:function(){var e=document.getElementById("auto-center-button");return e?{width:e.clientWidth,height:e.clientHeight}:null}},{key:"getAutoCenterButton",value:function(){var e=this.props.t,t=this.getViewerPanelBoundingRect(),n=this.getAutoCenterButtonSize();if(!t)return null;n||(n={width:0,height:0});var a={position:"absolute",top:t.top+t.height-n.height-8,left:t.left+t.width-n.width-8,pointerEvents:"auto",zIndex:2};return n.width||(a.opacity=0),l.a.createElement("div",{id:"auto-center-button",className:"auto-center-button",style:a,onClick:this.props.onAutoCenter},l.a.createElement(He.a,null),l.a.createElement("span",null,e("edit-panel.viewer-panel.center-logo")))}},{key:"render",value:function(){var e=this,t=d.a.isMobile(),n=this.props,a=n.t,i=n.editingLogoPurchased,o=n.config,s=n.shouldShowLogoAssistant,r=this.state,c=r.panel,u=r.canvas,h=r.selectedIds,f=r.hoveringIds,g=r.isDragging,p=r.isResizing,m=this.getViewerPanelBoundingRect(),v=!i,b=Qt.get(o,"meta.canvasColorInExport"),E=Qt.get(o,"meta.canvasColor"),C=ae.a.checkFeatureAvailable(this.props.featureList,ie.U),k=ae.a.checkFeatureAvailable(this.props.featureList,ie.Z),S=ae.a.checkFeatureAvailable(this.props.featureList,ie.V),O=ae.a.checkFeatureAvailable(this.props.featureList,ie.bb),w=ae.a.checkFeatureAvailable(this.props.featureList,ie.cb),y=ae.a.checkFeatureAvailable(this.props.featureList,ie.G),M=ae.a.checkFeatureAvailable(this.props.featureList,ie.F),x=!t&&!this.props.isLoadingEditingTips&&this.props.editingTips&&this.props.editingTips.length&&y,I=!t&&M,A=0;return C&&(A+=240),l.a.createElement("div",{className:"viewer-panel"},l.a.createElement("div",{id:"canvas"}),l.a.createElement("div",{className:"work-station",onMouseDown:this._onMouseDown.bind(this),onTouchStart:this._onMouseDown.bind(this),ref:"work-station",style:{minWidth:t?0:this.state.canvas.size.width*this.state.canvas.scale*1.4,minHeight:t?0:this.state.canvas.size.height*this.state.canvas.scale*1.2}},l.a.createElement("div",{className:"main-frame",ref:"main-frame"},l.a.createElement("div",{className:"work-station-content",ref:"work-station-content",style:{width:this.state.canvas.size.width*this.state.canvas.scale,height:this.state.canvas.size.height*this.state.canvas.scale,backgroundColor:b?"#".concat(E):"#FFFFFF",marginTop:t?0:90,boxShadow:t?"none":"0 5px 20px rgba(71,80,89,.15)"}},this.state.stack.map((function(t,n){var a=t.type,i=Qt.includes(e.state.selectedIds,t.id),o=Qt.includes(e.state.loadingIds,t.id);return"svg"===a?l.a.createElement(Ot.a,{canvas:e.state.canvas,elem:t,onBaseComponentAction:e.handleBaseComponentAction.bind(e),isSelected:i,key:t.id}):"text"===a?l.a.createElement(St.a,{canvas:e.state.canvas,elem:t,onBaseComponentAction:e.handleBaseComponentAction.bind(e),onTextComponentAction:e.handleTextComponentAction.bind(e),isSelected:i,isLoading:o,key:t.id}):"line"===a?l.a.createElement(It,{canvas:e.state.canvas,elem:t,onBaseComponentAction:e.handleBaseComponentAction.bind(e),isSelected:i,key:t.id}):"shape"===a?l.a.createElement(At.a,{canvas:e.state.canvas,elem:t,onBaseComponentAction:e.handleBaseComponentAction.bind(e),isSelected:i,key:t.id}):null})),l.a.createElement($t,{shouldShowWatermark:v})),S&&!t&&l.a.createElement(Yt.a,{config:this.props.config,onMetaChange:this.props.onMetaChange,onColorPopoverOpen:function(){e.unsubscribeEventListeners()},onColorPopoverClose:function(){e.subscribeEventListeners(),e.handleMouseUp()}}),!t&&v&&l.a.createElement(en,{className:"work-station-notice"},"- ",a("edit-panel.watermark-notice")," -")),l.a.createElement("div",{className:"overlay"},this.state.guidingLines.map((function(t,n){var a=e.state,i=a.panel,o=a.canvas;return l.a.createElement(qe,{panel:i,canvas:o,guidingLine:t,key:n})})),f.map((function(t){var n=e.state.stack.find((function(e){return e.id===t}));return g||p?null:l.a.createElement(nt,{panel:c,canvas:u,hoveringElem:n,key:t})})),h.map((function(t){var n=e.state.stack.find((function(e){return e.id===t}));return Qt.includes(e.state.loadingIds,t)?null:l.a.createElement(kt,Object.assign({},e.state,{resizable:1===h.length&&O,rotatable:1===h.length&&w,isRotating:e.state.isRotating,selectedElem:n,onSelectedFrameAction:e.handleSelectedFrameAction.bind(e),key:t}))})),function(){var t=e.state.selectedIds;if(t.length<=1)return null;var n=e.state.stack.filter((function(e){return Qt.includes(t,e.id)})),a=se.ConfigDigester.extractComponentsFrame(n);return l.a.createElement(kt,Object.assign({},e.state,{resizable:O,rotatable:!1,selectedElem:{type:"group",frame:a},onSelectedFrameAction:e.handleSelectedFrameAction.bind(e)}))}(),function(){var t=e.state,n=t.isDragSelecting,a=t.dragSelectInfo;return n?l.a.createElement(Nt,{dragSelectInfo:a,canvas:u,panel:c}):null}(),!t&&this.getAutoCenterButton(),!t&&s&&0===h.length&&m&&l.a.createElement("div",null,l.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()},style:{position:"absolute",top:m.top-20,left:m.left+m.width,pointerEvents:"auto",zIndex:2}},l.a.createElement(Ht,{onClick:function(){e.props.onClickLogoAssistantButton()}}))),!t&&h.length>0&&m&&l.a.createElement("div",null,l.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()},style:{position:"absolute",top:m.top,left:m.left+m.width+10,pointerEvents:"auto"}},l.a.createElement(Ut.e,{onActionItemClick:this.props.onActionItemClick,featureList:this.props.featureList})),l.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()},style:{position:"absolute",top:m.top-40,left:m.left,pointerEvents:"auto"}},C&&l.a.createElement(Wt.g,{onActionItemClick:this.props.onActionItemClick,offsetLeft:A}),k&&1===h.length&&l.a.createElement(Xt.c,{onActionItemClick:this.props.onActionItemClick,offsetLeft:A}))),x&&l.a.createElement(Pt,{onToggleButtonClick:this.props.toggleTipsCarousel,isShowingTipsCarousel:this.props.isShowingTipsCarousel,menuItem:this.props.menuItem,onMenuClick:this.props.onMenuClick,isLoadingEditingTips:this.props.isLoadingEditingTips,editingTips:this.props.editingTips}),I&&l.a.createElement(Gt,{content:a("edit-panel.tips.editing-alert")}))))}}]),n}(c.Component),nn=Object(Ye.b)()(tn),an=n(1777),on=n(1917),sn=(n(2216),function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.shouldShowBack;return l.a.createElement("div",{className:e?"floating-button back":"floating-button",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onClick:this.props.onClick},l.a.createElement("div",{className:e?"wrapper back":"wrapper"},l.a.createElement("i",{className:"fa fa-tint","aria-hidden":"true"}),l.a.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true"})))}}]),n}(c.Component)),rn=(n(2217),function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(e,a){var o;return Object(i.a)(this,n),(o=t.call(this,e,a)).colorPalettes=[{name:"Lady Pink",colors:["#F562A6","#FFB5CC","#F562A6","#FEEDF2"]},{name:"Juno",colors:["#1A535C","#578990","#1A535C","#FFE66C"]},{name:"Patriot",colors:["#334D88","#A90001","#E6E6E6","#0D255E"]},{name:"Ocean Wave",colors:["#197BBD","#696666","#197BBD","#62A7D3"]},{name:"The River",colors:["#3E72AF","#8DB1DD","#3E72AF","#DBE2F0"]},{name:"Apple",colors:["#FF1434","#292929","#F2F2F2","#FF1434"]},{name:"Tropical",colors:["#194702","#575757","#194702","#4E8E30"]},{name:"Good Old Days",colors:["#8B8138","#404040","#8B8138","#D6CD8C"]},{name:"Mystery",colors:["#A5427C","#851756","#A5427C","#FCCCE8"]},{name:"Smartie",colors:["#2EC5B6","#011628","#FF9F1C","#011628"]},{name:"Reliable",colors:["#4A2F7C","#2E2B2B","#CCB9EE","#4A2F7C"]},{name:"Calmness",colors:["#D8A794","#817571","#D8A794","#FFC9B5"]},{name:"Fresh",colors:["#4F873E","#434B26","#4F873E","#CFFFC0"]},{name:"Jujube",colors:["#6F1314","#420202","#6F1314","#C43E3E"]},{name:"Red Rock",colors:["#BF4D31","#381308","#BF4D31","#CDB7B1"]},{name:"Curious",colors:["#484BB4","#FFD14C","#9395DF","#484BB4"]},{name:"Carrot",colors:["#EF8A07","#A55D00","#EFD8BA","#EF8A07"]},{name:"Golden Age",colors:["#DDBF7E","#937A44","#DDBF7E","#FCEDC9"]},{name:"Rainforest",colors:["#187000","#45A92B","#E4E9C3","#282828"]},{name:"Wonderland",colors:["#E63946","#FB8991","#457A9C","#A8DADD"]},{name:"Marshmallow",colors:["#AA95DA","#FCBAD3","#FFFFD2","#AA95DA"]},{name:"Lychee",colors:["#EF243C","#8D99AE","#EDF2F4","#EF243C"]},{name:"Vinyl Records",colors:["#653C00","#1C1406","#C89542","#1C1406"]}],o}return Object(o.a)(n,[{key:"getColorPaletteBlocks",value:function(){var e=this;return this.colorPalettes.map((function(t,n){return l.a.createElement("div",{className:"color-palette-block",onClick:function(){e.props.onSelectColorPalette(t)},key:n},l.a.createElement("div",{className:"title"},t.name),l.a.createElement("div",{className:"color-preview-wrapper"},t.colors.map((function(e,t){return l.a.createElement("div",{className:"color-preview",style:{background:e},key:t})}))))}))}},{key:"render",value:function(){var e=this.props.t,t=this.props.active;return l.a.createElement("div",{className:t?"side-bar active":"side-bar"},l.a.createElement("p",{className:"palette-title"},e("edit-panel.color.premade-color-palettes")),this.getColorPaletteBlocks())}}]),n}(c.Component)),cn=Object(Ye.b)()(rn),ln=(n(2218),function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(e,a){var o;return Object(i.a)(this,n),(o=t.call(this,e,a)).state={hoverButton:!1,allowTooltip:!0,showSideBar:!1},o}return Object(o.a)(n,[{key:"componentWillUpdate",value:function(e){void 0!==e.opened&&e.opened!==this.state.showSideBar&&this.applyChange((function(t){return{showSideBar:e.opened}}))}},{key:"toggle",value:function(e){var t=this;this.applyChange((function(t){return{showSideBar:void 0!==e?e:!t.showSideBar}}),(function(){t.props.onToggle(t.state.showSideBar)}))}},{key:"applyChange",value:function(e,t){var n=this;this.setState((function(t){return e(t)}),(function(){t&&t(),n.state.showSideBar?n.setState({allowTooltip:!n.state.showSideBar}):setTimeout(function(){this.setState({allowTooltip:!this.state.showSideBar})}.bind(n),500)}))}},{key:"render",value:function(){var e=this,t=this.props.t,n=this.state,a=n.hoverButton,i=n.showSideBar,o=n.allowTooltip;return l.a.createElement("div",{className:"color-palette-side-bar"},l.a.createElement(on.a,{id:"color-palette-side-bar-tooltip",title:t("edit-panel.color.premade-color-palettes"),open:a&&o,placement:"left"},l.a.createElement(sn,{onMouseEnter:function(){e.setState({hoverButton:!0})},onMouseLeave:function(){e.setState({hoverButton:!1})},shouldShowBack:i,onClick:function(){e.toggle()}})),l.a.createElement(cn,{active:i,onSelectColorPalette:function(t){e.toggle(!1),e.props.onSelectColorPalette(t)}}))}}]),n}(c.Component)),dn=Object(Ye.b)()(ln),un=n(1152),hn=n.n(un),fn=n(1153),gn=n(760),pn=n(85),mn=n(4),vn=n(784),bn=n(1773),En=n.n(bn),Cn=n(26),kn=n(993),Sn=function(e,t,n){var a=new Image;a.onload=function(){var e=document.createElement("canvas");t=t||"ffffff";e.width=1024,e.height=632.32;var i=e.getContext("2d");i.fillStyle="#".concat(t),i.fillRect(0,0,e.width,e.height);var o,s,r=a.width/a.height,c=r>400/247,l=c?.15*e.width:0,d=c?0:.15*e.height;c?s=(o=e.width-2*l)/r:o=(s=e.height-2*d)*r;var u=(e.width-o)/2,h=(e.height-s)/2;i.drawImage(a,u,h,o,s);var f=e.toDataURL("image/jpeg");n(f)},a.src="data:image/svg+xml;base64,"+btoa(e)},On=n(808),wn=n(1526),yn=n(217),Mn=n.n(yn),xn={get:pe.a},In=function(e){var t,n=xn.get(e,"data.invalidReason");return t="BROWSER_ERROR"===n?n:xn.get(e,"message"),new Error(t)},An=function(e,t,n,a,i,o){var s={"Content-Type":"application/json",language:a};if(!i)return console.error("Token not found"),o(new Error("Token not found"));s["g-recaptcha-response"]=i,Object(Cn.default)("".concat(mn.default.apiBaseUrl,"/assistant/call-gpt-assistant"),{method:"post",headers:s,body:JSON.stringify({mode:e,brandInfo:t,images:JSON.stringify(n)})}).then((function(e){if(429===e.status)throw new Error("RATE_LIMIT_EXCEEDED");return e.json()})).then((function(e){if(e.success){var t=xn.get(e,"data.scores",[]),n=xn.get(e,"data.content",null);if(null===n)throw new Error("NO_CONTENT");return t.forEach((function(e,n){"number"!==typeof e&&(t[n]=parseFloat(e))})),o(null,{scores:t,content:n})}throw In(e)})).catch((function(e){return o(e,null)}))},Dn=(n(2219),function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.shouldShowBack;return l.a.createElement("div",{className:e?"floating-button back":"floating-button",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onClick:this.props.onClick},l.a.createElement("div",{className:e?"wrapper back":"wrapper"},l.a.createElement("i",{className:"fa fa-magic","aria-hidden":"true"}),l.a.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true"})))}}]),n}(c.Component)),jn=(n(2220),n(2221),function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).getMenuItemComponents=function(){var t=e.props.t,n=[{title:t("side-bar.logo-assistant.starter-menu.feedback.title"),description:t("side-bar.logo-assistant.starter-menu.feedback.desc"),icon:"fa-commenting",iconClass:"feedback",actionMode:"LOGO_ASSISTANT_ACTION_MODE_FEEDBACK"},{title:t("side-bar.logo-assistant.starter-menu.improve.title"),description:t("side-bar.logo-assistant.starter-menu.improve.desc"),icon:"fa-magic",iconClass:"improve",actionMode:"LOGO_ASSISTANT_ACTION_MODE_IMPROVE"},{title:t("side-bar.logo-assistant.starter-menu.compare.title"),description:t("side-bar.logo-assistant.starter-menu.compare.desc"),icon:"fa-compress",iconClass:"compare",actionMode:"LOGO_ASSISTANT_ACTION_MODE_COMPARE"}],a=e.props.currentUser&&e.props.currentUser.token;return n.map((function(t,n){var i="menu-item";return a||"LOGO_ASSISTANT_ACTION_MODE_COMPARE"!==t.actionMode||(i+=" disabled"),l.a.createElement("div",{key:n,className:i,onClick:function(){e.onSelectActionMode(t.actionMode)}},l.a.createElement("div",{className:"icon ".concat(t.iconClass)},l.a.createElement("i",{className:"fa ".concat(t.icon),"aria-hidden":"true"})),l.a.createElement("div",null,l.a.createElement("h2",null,t.title),l.a.createElement("p",null,t.description)),l.a.createElement("div",{className:"cheveron"},l.a.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true"})))}))},e.onSelectActionMode=function(t){var n=e.props.t;if(!(e.props.currentUser&&e.props.currentUser.token)&&"LOGO_ASSISTANT_ACTION_MODE_COMPARE"===t){var a=n("side-bar.logo-assistant.starter-menu.compare.alert");return window.alert(a)}e.props.onSelectActionMode(t)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.t;return l.a.createElement("div",{className:"starter-menu"},l.a.createElement("header",{className:"menu-header"},e("side-bar.logo-assistant.starter-menu.title")),l.a.createElement("p",{className:"menu-intro"},e("side-bar.logo-assistant.starter-menu.subtitle")),l.a.createElement("div",{className:"item-container"},this.getMenuItemComponents()),l.a.createElement("div",{className:"menu-desc"},l.a.createElement("p",{dangerouslySetInnerHTML:{__html:e("side-bar.logo-assistant.starter-menu.usage-cap")}})))}}]),n}(c.Component)),Nn=Object(Ye.b)()(jn),Ln=n(2334),Tn=n(1091),Rn=n(906),_n=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={score:e.score},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.score;isNaN(e)&&(e=0);var t={width:"".concat(e,"%"),backgroundColor:"#4CAF50",opacity:.7+e/100*.3,height:"24px",borderRadius:"8px"};return l.a.createElement("div",{className:"score-indicator"},l.a.createElement("div",{className:"progress-background",style:{backgroundColor:"#e0e0e0",borderRadius:"8px"}},l.a.createElement("div",{className:"progress-bar",style:t})))}}]),n}(c.Component),zn=n(60),Bn=n(806),Fn=(n(2222),function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).assistantSectionRef=l.a.createRef(),e}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isLoadingAssistantResult;t.shouldAutoScrollToFocusComponent&&(n&&!e.isLoadingAssistantResult&&this.assistantSectionRef.current&&this.assistantSectionRef.current.scrollIntoView({behavior:"smooth"}),!n&&e.isLoadingAssistantResult&&this.assistantSectionRef.current&&this.assistantSectionRef.current.scrollIntoView({behavior:"smooth"}))}},{key:"processData",value:function(){var e=[],t=this.props,n=t.t,a=t.actionMode,i=t.logoConfig,o=t.logoSvg,s=t.brandInfo,r=t.selectedLogosForComparison,c=t.shouldShowVerifyReCaptcha,l=t.shouldAllowUserRefresh,d=t.isLoadingAssistantResult,u=t.assistantResult,h=t.assistantResultError,f=!1,g=[];"LOGO_ASSISTANT_ACTION_MODE_COMPARE"===a?r&&r.length&&(f=!0,r.forEach((function(e){g.push({type:"logo",data:e})}))):(f=!0,g.push({type:"logo",data:{config:i,svg:o}})),f&&s&&g.push({type:"brandInfo",data:{text:s}});var p=[];if(d)p.push({type:"loading"});else if(c)p.push({type:"recaptcha"});else if(u){var m=u.scores,v=u.content;"LOGO_ASSISTANT_ACTION_MODE_COMPARE"===a?r&&r.length&&m&&m.length===r.length&&r.forEach((function(e,t){p.push({type:"score",data:{config:e.config,svg:e.svg,score:m[t]}})})):m&&m.length&&p.push({type:"score",data:{config:i,svg:o,score:m[0]}}),v&&p.push({type:"text",data:{markdown:v}}),l&&p.push({type:"refresh",data:{text:n("side-bar.logo-assistant.assistant-result.refresh")}})}else if(h){var b=n("side-bar.logo-assistant.assistant-result.generic-error");h.message&&"RATE_LIMIT_EXCEEDED"===h.message&&(b=n("side-bar.logo-assistant.assistant-result.rate-limit-exceeded")),p.push({type:"error",data:{text:b}})}return e.push({role:"user",data:g}),e.push({role:"assistant",data:p}),e}},{key:"getPageHeader",value:function(){var e=this.props,t=e.t,n=e.handleDismiss,a="",i="";switch(e.actionMode){case"LOGO_ASSISTANT_ACTION_MODE_FEEDBACK":a=t("side-bar.logo-assistant.starter-menu.feedback.title"),i=t("side-bar.logo-assistant.starter-menu.feedback.desc");break;case"LOGO_ASSISTANT_ACTION_MODE_IMPROVE":a=t("side-bar.logo-assistant.starter-menu.improve.title"),i=t("side-bar.logo-assistant.starter-menu.improve.desc");break;case"LOGO_ASSISTANT_ACTION_MODE_COMPARE":a=t("side-bar.logo-assistant.starter-menu.compare.title"),i=t("side-bar.logo-assistant.starter-menu.compare.desc")}return l.a.createElement("div",{className:"result-header-container"},l.a.createElement("div",{className:"header-left"},l.a.createElement("header",{className:"result-header"},l.a.createElement("i",{className:"fa fa-commenting","aria-hidden":"true"}),l.a.createElement("span",null,a)),l.a.createElement("p",{className:"result-intro"},i)),l.a.createElement("div",{className:"header-right"},l.a.createElement("div",{className:"close-btn"},l.a.createElement(Tn.a,{onClick:n}))))}},{key:"getUserComponents",value:function(e){var t=this.props,n=t.t,a=t.handleEditBrandInfo,i=[];return e.filter((function(e){return"user"===e.role})).forEach((function(e,t){var o=l.a.createElement("section",{key:t},l.a.createElement("div",{className:"section-title-container"},l.a.createElement("div",{className:"icon user"},l.a.createElement("i",{className:"fa fa-user","aria-hidden":"true"})),l.a.createElement("p",null,n("side-bar.logo-assistant.assistant-result.section-header-user"))),e.data.map((function(e,t){switch(e.type){case"logo":var i=null;return e.data.config&&(i=On.a.getCanvasColor(e.data.config)),l.a.createElement("div",{key:t,className:"info-container"},l.a.createElement(Rn.a,{svg:e.data.svg,backgroundColor:i,showWatermark:!0}));case"brandInfo":return l.a.createElement("div",{key:t,className:"info-container"},l.a.createElement("div",{className:"info-text"},l.a.createElement("p",null,e.data.text)),l.a.createElement("button",{className:"edit-button",onClick:a},n("side-bar.logo-assistant.assistant-result.brand-info-edit-btn")));default:return null}})));i.push(o)})),i}},{key:"getAssistantComponents",value:function(e){var t=this,n=this.props,a=n.t,i=n.onConfirmRecaptchaToken,o=n.shouldAllowUserRefresh,s=n.handleRefresh,r=[];return e.filter((function(e){return"assistant"===e.role})).forEach((function(e,n){if(0===e.data.length)return null;var c=l.a.createElement("section",{key:n,ref:t.assistantSectionRef,className:o?"allow-refresh":""},l.a.createElement("div",{className:"section-title-container"},l.a.createElement("div",{className:"icon assistant"},l.a.createElement("i",{className:"fa fa-commenting","aria-hidden":"true"})),l.a.createElement("p",null,a("side-bar.logo-assistant.assistant-result.section-header-assistant"))),e.data.map((function(e,n){switch(e.type){case"score":var o=null;return e.data.config&&(o=On.a.getCanvasColor(e.data.config)),l.a.createElement("div",{key:n,className:"info-container score"},l.a.createElement(Rn.a,{svg:e.data.svg,backgroundColor:o,showWatermark:!0}),l.a.createElement("p",{className:"score-title"},l.a.createElement("strong",null,a("side-bar.logo-assistant.assistant-result.score.your-score")),"\xa0",l.a.createElement("span",{className:"user-score"},e.data.score)," / 100"),l.a.createElement(_n,{score:e.data.score}),l.a.createElement("p",{className:"score-desc"},t.getScoreStatement(e.data.score)));case"text":return l.a.createElement("div",{key:n,className:"info-container assistant"},l.a.createElement("div",{className:"info-text"},l.a.createElement(Ln.a,null,e.data.markdown)));case"loading":return l.a.createElement("div",{key:n,className:"info-container loading"},l.a.createElement(zn.a,null));case"recaptcha":return l.a.createElement("div",{key:n,className:"info-container recaptcha"},l.a.createElement(Bn.a,{ref:t.recaptchaRef,className:"recaptcha",sitekey:mn.default.GOOGLE_RECAPTCHA_ENTERPRISE_CHECKBOX_SITEKEY,action:vn.a.GOOGLE_RECAPTCHA_ACTION_VERIFY_RECAPTCHA,onChange:i}));case"error":return l.a.createElement("div",{key:n,className:"info-container error"},l.a.createElement("div",{className:"info-text"},l.a.createElement("p",null,e.data.text)));case"refresh":return l.a.createElement("div",{key:n,className:"info-container refresh"},l.a.createElement("div",{className:"info-text"},l.a.createElement("p",null,e.data.text)),l.a.createElement("button",{onClick:s},l.a.createElement("i",{className:"fa fa-refresh","aria-hidden":"true"}),a("side-bar.logo-assistant.assistant-result.refresh-btn")));default:return null}})));r.push(c)})),r}},{key:"getContainerClass",value:function(){var e="assistant-result";switch(this.props.actionMode){case"LOGO_ASSISTANT_ACTION_MODE_FEEDBACK":e+=" feedback";break;case"LOGO_ASSISTANT_ACTION_MODE_IMPROVE":e+=" improve";break;case"LOGO_ASSISTANT_ACTION_MODE_COMPARE":e+=" compare"}return e}},{key:"getScoreStatement",value:function(e){var t=this.props.t;return isNaN(e)?"":t(e>=90?"side-bar.logo-assistant.assistant-result.score.masterpiece":e>=80?"side-bar.logo-assistant.assistant-result.score.brilliant":e>=70?"side-bar.logo-assistant.assistant-result.score.impressive":e>=60?"side-bar.logo-assistant.assistant-result.score.promising":e>=50?"side-bar.logo-assistant.assistant-result.score.solid":e>=40?"side-bar.logo-assistant.assistant-result.score.needs-polish":"side-bar.logo-assistant.assistant-result.score.fresh-start")}},{key:"render",value:function(){var e=this.processData();return l.a.createElement("div",{className:this.getContainerClass()},this.getPageHeader(),this.getUserComponents(e),this.getAssistantComponents(e))}}]),n}(c.Component)),Pn=Object(Ye.b)()(Fn),Gn=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).handleSelectActionMode=function(t){e.props.onSelectActionMode(t)},e.handleEditBrandInfo=function(){e.props.onEditBrandInfo()},e.handleRefresh=function(){e.props.onRefreshAssistantResult()},e.handleDismiss=function(){e.props.onDismissAssistantResult()},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.active,n=e.showAssistantResult,a=e.isLoadingAssistantResult,i=e.shouldAllowUserRefresh,o=e.shouldShowVerifyReCaptcha,s=this.props,r=s.actionMode,c=s.currentUser,d=s.brandInfo,u=s.logoConfig,h=s.logoSvg,f=s.selectedLogosForComparison,g=s.assistantResult,p=s.assistantResultError;return l.a.createElement("div",{className:t?"side-bar active":"side-bar"},n?l.a.createElement(Pn,{actionMode:r,brandInfo:d,logoConfig:u,logoSvg:h,selectedLogosForComparison:f,isLoadingAssistantResult:a,shouldAutoScrollToFocusComponent:t,shouldShowVerifyReCaptcha:o,shouldAllowUserRefresh:i,assistantResult:g,assistantResultError:p,handleEditBrandInfo:this.handleEditBrandInfo,handleRefresh:this.handleRefresh,handleDismiss:this.handleDismiss,onConfirmRecaptchaToken:this.props.onConfirmRecaptchaToken}):l.a.createElement(Nn,{currentUser:c,onSelectActionMode:this.handleSelectActionMode}))}}]),n}(c.Component),Un=Object(Ye.b)()(Gn),Wn=n(1770),Xn=(n(2229),function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleInputChange=function(e){a.setState({brandInfo:e})},a.state={brandInfo:e.brandInfo||""},a}return Object(o.a)(n,[{key:"onSaveClicked",value:function(){var e=this,t=En.a.MAX_BRAND_INFO_CHARS,n=this.refs.brandInfo.refs.textarea.value;n.length<=t?this.setState({brandInfo:n},(function(){e.props.onConfirm(n)})):console.error("Brand info exceeds the limit of",t,"characters")}},{key:"render",value:function(){var e=this.props.t,t=this.state.brandInfo,n=!t;return l.a.createElement("div",{className:"edit-brand-info-modal"},l.a.createElement("h1",{className:"header"},e("side-bar.logo-assistant.brand-info-modal.header")),l.a.createElement("p",{className:"subheader"},e("side-bar.logo-assistant.brand-info-modal.subheader")),l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"content-row"},l.a.createElement("div",{className:"content-full"},l.a.createElement(Wn.a,{title:e("side-bar.logo-assistant.brand-info-modal.helper-text"),onChange:this.handleInputChange,value:t,ref:"brandInfo",placeholder:e("side-bar.logo-assistant.brand-info-modal.placeholder"),maxChars:En.a.MAX_BRAND_INFO_CHARS,charactersText:e("side-bar.logo-assistant.brand-info-modal.characters")})))),l.a.createElement("div",{className:"save-button-wrapper"},this.props.isLoading?l.a.createElement(zn.a,null):l.a.createElement("button",{className:"save-button ".concat(n?"deactivated":""),disabled:n,onClick:this.onSaveClicked.bind(this)},e("side-bar.logo-assistant.brand-info-modal.confirm-btn"))))}}]),n}(c.Component)),Vn=Object(Ye.b)()(Xn),Hn=n(61),Yn=n(3),Kn=(n(2230),En.a.MAX_SELECTIONS-1),Zn=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleConfirm=function(){if(a.state.selections.length>=1&&a.state.selections.length<=Kn){for(var e=a.props,t=e.logoConfig,n=e.logoSvg,i=[{id:e.editingLogoId,config:t,svg:n}],o=a.props.saved.logos,s=a.state.selections,r=function(e){var t=s[e],n=o.find((function(e){return e.id===t}));i.push({id:n.id,config:n.layoutConfig,svg:n.svg})},c=0;c<s.length;c++)r(c);a.props.onConfirm(i)}},a.state={selections:[],buttonClass:"disabled"},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.resetSavedLogos(),this.fetchSavedLogos(!0)}},{key:"componentDidUpdate",value:function(e,t){this.state.selections!==t.selections&&this.setState({buttonClass:this.state.selections.length?"":"disabled"})}},{key:"componentWillUnmount",value:function(){this.props.resetSavedLogos()}},{key:"fetchSavedLogos",value:function(e){this.props.getSavedLogos({page:e?1:this.props.saved.nextPage,perPage:32})}},{key:"onLogoClick",value:function(e){this.setState((function(t){return t.selections.includes(e)?{selections:t.selections.filter((function(t){return t!==e}))}:t.selections.length>=Kn?null:{selections:[].concat(Object(Hn.a)(t.selections),[e])}}))}},{key:"generateBlock",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.props,a=n.logoConfig,i=n.logoSvg,o=n.editingLogoId,s=On.a.getCanvasColor(a),r=[];t.length&&r.push(l.a.createElement("li",{className:"logo-block selected default",key:"default-logo"},l.a.createElement(Rn.a,{svg:i,backgroundColor:s,showWatermark:!0}),l.a.createElement("span",{className:"selection"},l.a.createElement("i",{className:"fa fa-check","aria-hidden":"true"}))));for(var c=function(n){var a=t[n];if(o===a.id)return"continue";var i=["logo-block"];e.state.selections.indexOf(a.id)>-1&&i.push("selected");var s=On.a.getCanvasColor(a.layoutConfig);r.push(l.a.createElement("li",{className:i.join(" "),key:n,onClick:function(){e.onLogoClick(a.id)}},l.a.createElement(Rn.a,{svg:a.svg,backgroundColor:s,showWatermark:!0}),l.a.createElement("span",{className:"selection"},l.a.createElement("i",{className:"fa fa-check","aria-hidden":"true"}))))},d=0;d<t.length;d++)c(d);return r}},{key:"render",value:function(){var e=this,t=this.props.t,n=this.state.selections||[],a=this.props.saved,i=a.isLoading,o=a.logos||[],s=a.nextPage<=a.totalPages;return l.a.createElement("div",{className:"select-saved-logo-modal"},l.a.createElement("div",{className:"main"},l.a.createElement("h1",{className:"header"},t("side-bar.logo-assistant.select-logo-modal.header")),l.a.createElement("p",{className:"subheader"},t("side-bar.logo-assistant.select-logo-modal.subheader")),l.a.createElement("div",{className:"my-logos"},l.a.createElement("div",{className:"container"},l.a.createElement("ul",{className:"logo-container"},this.generateBlock(o)),i&&l.a.createElement(zn.a,null),s&&!i&&l.a.createElement("button",{className:"load-more-btn",onClick:function(){e.fetchSavedLogos()}},t("common.load-more"))))),l.a.createElement("div",{className:"footer"},l.a.createElement("div",null,l.a.createElement("button",{className:this.state.buttonClass,onClick:this.handleConfirm},t("side-bar.logo-assistant.select-logo-modal.compare-btn")),l.a.createElement("p",null," ","".concat(n.length+1," / ").concat(Kn+1," ").concat(t("side-bar.logo-assistant.select-logo-modal.logos"))," "))))}}]),n}(c.Component),qn=Object(pn.connect)((function(e){return{saved:e.profile.saved}}),(function(e){return{resetSavedLogos:function(){e(Object(Yn.Qc)())},getSavedLogos:function(t){e(Object(Yn.Cc)(t))}}}))(Object(Ye.b)()(Zn)),Jn=(n(2231),function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(e,a){var o;return Object(i.a)(this,n),(o=t.call(this,e,a)).state={hoverButton:!1,allowTooltip:!0,showSideBar:!1,showAssistantResult:!1,showEditBrandInfoModal:!1,showSelectSavedLogosModal:!1,actionMode:null,logoConfig:null,logoSvg:null,brandInfo:o.getUserBrandInfo(),isConfigUpdated:!1,isBrandInfoUpdated:!1,selectedLogosForComparison:null,isLoadingAssistantResult:!1,fetchTaskId:null,assistantResult:null,assistantResultError:null,shouldShowVerifyReCaptcha:!1},o}return Object(o.a)(n,[{key:"resetState",value:function(e){this.setState({isLoadingAssistantResult:!1,fetchTaskId:null,assistantResult:null,assistantResultError:null,shouldShowVerifyReCaptcha:!1,isConfigUpdated:!1,isBrandInfoUpdated:!1,selectedLogosForComparison:null},(function(){e&&e()}))}},{key:"componentDidMount",value:function(){this._ismounted=!0}},{key:"componentWillUnmount",value:function(){this._ismounted=!1}},{key:"componentWillUpdate",value:function(e){void 0!==e.opened&&e.opened!==this.state.showSideBar&&this.toggleSideBar(e.opened)}},{key:"componentDidUpdate",value:function(e,t){this.state.showAssistantResult&&this.state.assistantResult&&JSON.stringify(this.state.logoConfig)!==JSON.stringify(this.props.config)&&!1===this.state.isConfigUpdated&&this.setState({isConfigUpdated:!0})}},{key:"getUserBrandInfo",value:function(){var e=localStorage.getItem("userBrandInfo");return e||null}},{key:"setUserBrandInfo",value:function(e,t){var n=En.a.MAX_BRAND_INFO_CHARS;e.length<=n?(localStorage.setItem("userBrandInfo",e),this.setState((function(t){var n={brandInfo:e};return null!==t.brandInfo&&t.brandInfo!==e&&(n.isBrandInfoUpdated=!0),n}),(function(){t&&t()}))):console.error("Brand info exceeds the limit of",n,"characters")}},{key:"buildLogoSvg",value:function(e){var t=this.state.logoConfig;t&&kn.LogoBuilder.build(t,{width:300,height:147,resourceOptions:{pngExt:"-sm"}},e)}},{key:"toggleSideBar",value:function(e){var t,n=this;void 0!==e?t=e:(t=!this.state.showSideBar)&&Lt.a.submitTryLogoAssistantEvent(),this.setState({showSideBar:t},(function(){n.props.onToggle(n.state.showSideBar),n.state.showSideBar?n.setState({allowTooltip:!n.state.showSideBar}):setTimeout(function(){this.setState({allowTooltip:!this.state.showSideBar})}.bind(n),500)}))}},{key:"toggleEditBrandInfoModal",value:function(e,t){this.setState({showEditBrandInfoModal:e},t)}},{key:"toggleSelectSavedLogosModal",value:function(e,t){this.setState({showSelectSavedLogosModal:e},t)}},{key:"toggleAssistantResult",value:function(e,t){this.setState((function(){var t={showAssistantResult:e};return e||(t.actionMode=null),t}),t)}},{key:"getEditBrandInfoModal",value:function(){var e=this,t=this.state,n=t.showEditBrandInfoModal,a=t.brandInfo;if(n){var i=this.onHandleEditBrandInfoModalClosed.bind(this);return l.a.createElement(gn.ModalContainer,{onClose:function(){e.toggleEditBrandInfoModal(!1,i)},zIndex:9999},l.a.createElement(gn.ModalDialog,{className:"lm-modal",dismissOnBackgroundClick:!1},l.a.createElement(Vn,{brandInfo:a,onConfirm:function(t){e.setUserBrandInfo(t,(function(){e.toggleEditBrandInfoModal(!1,i)}))}})))}return null}},{key:"getSelectSavedLogosModal",value:function(){var e=this,t=this.state.showSelectSavedLogosModal,n=this.state,a=n.logoConfig,i=n.logoSvg,o=this.props.preCheckout.editingLogoId;if(t){var s=this.onHandleSelectSavedLogosModalClosed.bind(this);return l.a.createElement(gn.ModalContainer,{onClose:function(){e.toggleSelectSavedLogosModal(!1,s)},zIndex:9999},l.a.createElement(gn.ModalDialog,{className:"lm-modal",dismissOnBackgroundClick:!1},l.a.createElement(qn,{logoConfig:a,logoSvg:i,editingLogoId:o,onConfirm:function(t){e.setState({selectedLogosForComparison:t},(function(){e.toggleSelectSavedLogosModal(!1,s)}))}})))}return null}},{key:"onSelectActionMode",value:function(e){var t=this;this.setState({actionMode:e},(function(){t.toggleAssistantResult(!0,(function(){var n="";switch(e){case"LOGO_ASSISTANT_ACTION_MODE_FEEDBACK":n="feedback";break;case"LOGO_ASSISTANT_ACTION_MODE_IMPROVE":n="improve";break;case"LOGO_ASSISTANT_ACTION_MODE_COMPARE":n="compare";break;default:console.error("Unknown action mode",e)}n&&Lt.a.submitSelectAiAssistantModeEvent(n),t.onRefreshAssistantResult()}))}))}},{key:"onEditBrandInfo",value:function(){this.toggleEditBrandInfoModal(!0)}},{key:"onRefreshAssistantResult",value:function(){var e=this;this.setState({logoConfig:this.props.config,logoSvg:null},(function(){e.buildLogoSvg((function(t,n){t?console.error("Error building logo svg",t):e.setState({logoSvg:n.svg},(function(){e.resetState((function(){e.execute()}))}))}))}))}},{key:"onDismissAssistantResult",value:function(){var e=this,t=this.props.t,n=function(){e.toggleAssistantResult(!1),e.resetState()};this.state.assistantResult?window.confirm(t("side-bar.logo-assistant.assistant-result.dismiss-confirm"))&&n():n()}},{key:"onConfirmRecaptchaToken",value:function(e){var t=this;this.setState({shouldShowVerifyReCaptcha:!1}),Object(Cn.default)("".concat(mn.default.apiBaseUrl,"/recaptcha/verify-recaptcha"),{method:"post",headers:{"g-recaptcha-response":e||"TOKEN_NOT_FOUND"}}).then((function(e){return e.json()})).then((function(e){e.success&&t.execute()})).catch((function(e){console.error("Error",e)}))}},{key:"onHandleEditBrandInfoModalClosed",value:function(){var e=this.state,t=e.showEditBrandInfoModal,n=e.brandInfo;t||n?this.execute():this.toggleAssistantResult(!1)}},{key:"onHandleSelectSavedLogosModalClosed",value:function(){!1===this.state.showSelectSavedLogosModal&&(this.state.selectedLogosForComparison?this.execute():this.toggleAssistantResult(!1))}},{key:"execute",value:function(){var e=this.state,t=e.actionMode,n=e.brandInfo,a=e.assistantResult;this.state.showAssistantResult&&(n?"LOGO_ASSISTANT_ACTION_MODE_COMPARE"!==t||this.state.selectedLogosForComparison?a||this.onCallAssistant():this.toggleSelectSavedLogosModal(!0):this.toggleEditBrandInfoModal(!0))}},{key:"onCallAssistant",value:function(){var e=this;if(!this.state.isLoadingAssistantResult){var t=Mn.a.generate();this.setState({isLoadingAssistantResult:!0,fetchTaskId:t,assistantResult:null,assistantResultError:null}),this.fetchAssistantResult((function(n,a){if(n)return"BROWSER_ERROR"===n.message&&e.setState({shouldShowVerifyReCaptcha:!0}),e.setState({isLoadingAssistantResult:!1,fetchTaskId:null,assistantResultError:n});if(e._ismounted&&e.state.fetchTaskId===t){var i=a.scores,o=a.content;e.setState({isLoadingAssistantResult:!1,fetchTaskId:null,assistantResult:{scores:i,content:o}})}}))}}},{key:"fetchAssistantResult",value:function(){var e=Object(fn.a)(hn.a.mark((function e(t){var n,a,i,o,s,r,c,l;return hn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,a=n.actionMode,i=n.brandInfo){e.next=3;break}return e.abrupt("return",t(new Error("BRAND_INFO_NOT_PROVIDED")));case 3:o="",e.t0=a,e.next="LOGO_ASSISTANT_ACTION_MODE_FEEDBACK"===e.t0?7:"LOGO_ASSISTANT_ACTION_MODE_IMPROVE"===e.t0?9:"LOGO_ASSISTANT_ACTION_MODE_COMPARE"===e.t0?11:13;break;case 7:return o="feedback",e.abrupt("break",15);case 9:return o="improve",e.abrupt("break",15);case 11:return o="compare",e.abrupt("break",15);case 13:return console.error("Unknown action mode",a),e.abrupt("return",t(new Error("UNKNOWN_ACTION_MODE")));case 15:if(!((s="LOGO_ASSISTANT_ACTION_MODE_COMPARE"===a?this.state.selectedLogosForComparison:[{config:this.state.logoConfig,svg:this.state.logoSvg}]).length>En.a.MAX_SELECTIONS)){e.next=18;break}return e.abrupt("return",t(new Error("EXCEED_MAX_LOGOS_FOR_COMPARE")));case 18:return r=s.map((function(e){var t=On.a.getCanvasColor(e.config);return new Promise((function(n,a){Sn(e.svg,t,(function(e){e=e.replace(/^data:image\/jpeg;base64,/,""),n(e)}))}))})),c=this.props.i18n.language,e.next=22,wn.a.getToken(vn.a.GOOGLE_RECAPTCHA_ACTION_CALL_GPT_ASSISTANT);case 22:l=e.sent,Promise.all(r).then((function(e){An(o,i,e,c,l,(function(e,n){Lt.a.submitReceiveAiAssistantResultEvent(o),t&&t(e,n)}))})).catch((function(e){return t(e)}));case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.t,a=t.currentUser,i=this.state,o=i.hoverButton,s=i.allowTooltip,r=i.showSideBar,c=i.showAssistantResult,d=i.isLoadingAssistantResult,u=i.isConfigUpdated,h=i.isBrandInfoUpdated,f=i.shouldShowVerifyReCaptcha,g=this.state,p=g.actionMode,m=g.logoConfig,v=g.logoSvg,b=g.brandInfo,E=g.selectedLogosForComparison,C=g.assistantResult,k=g.assistantResultError;return l.a.createElement("div",{className:"logo-assistant-container"},l.a.createElement(on.a,{id:"logo-assistant-side-bar-tooltip",title:n("side-bar.logo-assistant.cta"),open:o&&s,placement:"left"},l.a.createElement(Dn,{onMouseEnter:function(){e.setState({hoverButton:!0})},onMouseLeave:function(){e.setState({hoverButton:!1})},shouldShowBack:r,onClick:function(){e.toggleSideBar()}})),l.a.createElement(Un,{actionMode:p,currentUser:a,brandInfo:b,logoConfig:m,logoSvg:v,selectedLogosForComparison:E,assistantResult:C,assistantResultError:k,active:r,showAssistantResult:c,shouldShowVerifyReCaptcha:f,shouldAllowUserRefresh:u||h,isLoadingAssistantResult:d,onSelectActionMode:this.onSelectActionMode.bind(this),onEditBrandInfo:this.onEditBrandInfo.bind(this),onRefreshAssistantResult:this.onRefreshAssistantResult.bind(this),onDismissAssistantResult:this.onDismissAssistantResult.bind(this),onConfirmRecaptchaToken:this.onConfirmRecaptchaToken.bind(this)}),this.getEditBrandInfoModal(),this.getSelectSavedLogosModal())}}]),n}(c.Component)),Qn=Object(pn.connect)((function(e){return{currentUser:e.account.currentUser,preCheckout:e.preCheckout}}),(function(e){return{}}))(Object(Ye.b)()(Jn)),$n=(n(2232),{cloneDeep:C.a,get:pe.a,isEqual:M.a}),ea=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(e,a){var o;Object(i.a)(this,n),o=t.call(this,e,a);var s=window.innerWidth>=1400?1:.7;return d.a.isMobile()&&(s=window.innerWidth/e.canvasSize.width),o.state={canvasSize:e.canvasSize,scale:s,colorPaletteOpened:!1,logoAssistantOpened:!1},o}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(e){if(d.a.isMobile()&&!$n.isEqual(e.canvasSize,this.props.canvasSize)){var t=window.innerWidth/this.props.canvasSize.width;this.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{canvas:Object(a.a)(Object(a.a)({},e.canvas),{},{scale:t})})}))}}},{key:"handleViewerScaleChange",value:function(e){var t=Math.round(10*this.state.scale)/10,n="plus"===e?t+.1:t-.1;(n=n.toFixed(1))>=.6&&n<=1.4&&this.setState({scale:n})}},{key:"handleLogoAssistantButtonClick",value:function(){this.setState({logoAssistantOpened:!0}),Lt.a.submitTryLogoAssistantEvent()}},{key:"handleColorSelect",value:function(e){var t=e.colors[0].replace("#",""),n=e.colors[1].replace("#",""),a=e.colors[2].replace("#",""),i=e.colors[3].replace("#",""),o=this.props.componentInfo,s=function(e){var t=this.props.config.components.find((function(t){return t.id===e}));return t&&(t=$n.cloneDeep(t)),t},r=function(e,o){var r=this,c=[];return e.forEach((function(e){var l=s.bind(r)(e.id);if(l){var d=e.nSupportingDarkBackgrounds%2===1;if("background"===o){var u=l.data.darkBackground?i:n;l.data.tintColor=u,e.backgroundSupport&&d&&l.data.darkBackground&&(l.data.tintColor=n)}else e.backgroundSupport&&d?l.data.tintColor=a:l.data.tintColor="primary"===e.priority?t:n;var f=Boolean($n.get(l,"data.stroke.width")),g=l.data.tintColor;f&&(l.data.tintColor=function(e){var t=h()(e);return t.isLight()?t.darken(25).toHex():t.lighten(25).toHex()}(g),l.data.stroke.tintColor=g),c.push(l)}})),c},c=[];for(var l in o)c=c.concat(r.bind(this)(o[l],l));this.props.onComponentsChange(c,{userAction:!0})}},{key:"render",value:function(){var e=this,t=d.a.isMobile(),n=this.props,a=n.config,i=n.editingItems,o=n.editingLogoPurchased,s=n.shouldShowLogoAssistant,r=this.state.canvasSize,c=t?this.state.scale:Math.round(10*this.state.scale)/10,u=this.props.undoStack.length>0,h=this.props.redoStack.length>0,f="viewer";return s&&(f+=" assistant-activated"),l.a.createElement("div",{className:f},l.a.createElement(nn,{ref:"viewer-panel",config:a,canvasSize:r,currentScale:c,editingLogoPurchased:this.props.editingLogoPurchased,selectedComponents:i,onComponentsChange:function(t,n){e.props.onComponentsChange(t,n)},onAutoCenter:this.props.onAutoCenter,onClickLogoAssistantButton:this.handleLogoAssistantButtonClick.bind(this),onActionItemClick:function(t){e.props.onActionItemClick(t,i)},onDeleteComponents:this.props.onDeleteComponents,onSelectComponents:function(t){e.props.onSelectComponents(t),e.setState({colorPaletteOpened:!1,logoAssistantOpened:!1})},onUndoChange:this.props.onUndoChange,onRedoChange:this.props.onRedoChange,onMetaChange:this.props.onMetaChange,menuItem:this.props.menuItem,onMenuClick:this.props.onMenuClick,isShowingTipsCarousel:this.props.isShowingTipsCarousel,toggleTipsCarousel:this.props.toggleTipsCarousel,isLoadingEditingTips:this.props.isLoadingEditingTips,editingTips:this.props.editingTips,featureList:this.props.featureList,shouldShowLogoAssistant:this.props.shouldShowLogoAssistant}),!t&&!o&&l.a.createElement(an.a,null),!t&&s&&l.a.createElement(Qn,{config:a,opened:this.state.logoAssistantOpened,onToggle:function(t){e.setState({logoAssistantOpened:t}),t&&e.props.onSelectComponents(null)}}),!t&&l.a.createElement(dn,{opened:this.state.colorPaletteOpened,onToggle:function(t){e.setState({colorPaletteOpened:t}),t&&e.props.onSelectComponents(null)},onSelectColorPalette:this.handleColorSelect.bind(this)}),!t&&l.a.createElement("div",{className:"viewer-control"},l.a.createElement("i",{className:"fa fa-search","aria-hidden":"true"}),l.a.createElement("span",null,l.a.createElement("i",{onClick:function(){e.handleViewerScaleChange("minus")},className:"fa fa-minus","aria-hidden":"true"}),l.a.createElement("span",null,"".concat(Math.round(100*c),"%")),l.a.createElement("i",{onClick:function(){e.handleViewerScaleChange("plus")},className:"fa fa-plus","aria-hidden":"true"}))),!t&&l.a.createElement("div",{className:"action-control"},l.a.createElement("span",null,l.a.createElement("i",{onClick:this.props.onUndoChange,className:u?"fa fa-undo":"fa fa-undo disabled","aria-hidden":"true"}),l.a.createElement("span",null),l.a.createElement("i",{onClick:this.props.onRedoChange,className:h?"fa fa-repeat":"fa fa-repeat disabled","aria-hidden":"true"}))))}}]),n}(c.Component);t.a=ea},2175:function(e,t,n){},2178:function(e,t,n){var a={get:n(215)},i=n(913).degreeToRadian;e.exports=function(e,t){var n=e.frame,o=n.origin,s=n.size,r=a.get(e,"transform.rotate")||0,c=t||"center",l=o.x+s.width/2,d=o.y+s.height/2,u=i(r),h=2*Math.atan(s.height/s.width),f=0;switch(c){case"e":f=u;break;case"s":f=Math.PI/2+u;break;case"w":f=Math.PI+u;break;case"n":f=3*Math.PI/2+u;break;case"se":f=h/2+u;break;case"sw":f=Math.PI-h/2+u;break;case"nw":f=Math.PI+h/2+u;break;case"ne":f=2*Math.PI-h/2+u}var g=Math.sqrt(Math.pow(s.width,2)+Math.pow(s.height,2)),p=0;switch(c){case"nw":case"ne":case"se":case"sw":p=g/2;break;case"w":case"e":p=s.width/2;break;case"n":case"s":p=s.height/2}return{x:l+p*Math.cos(f),y:d+p*Math.sin(f)}}},2179:function(e,t,n){var a=n(913).degreeToRadian;e.exports={getDeltaWithResizeMode:function(e,t,n,i){var o,s,r=e||0,c=t||0,l=a(i),d=Math.sin(l),u=Math.cos(l);switch(n){case"se":o=r*u+c*d,s=-r*d+c*u;break;case"sw":o=-r*u-c*d,s=-r*d+c*u;break;case"nw":o=-r*u-c*d,s=r*d-c*u;break;case"ne":o=r*u+c*d,s=r*d-c*u;break;case"w":o=-r*u-c*d,s=0;break;case"e":o=r*u+c*d,s=0;break;case"n":o=0,s=r*d-c*u;break;case"s":o=0,s=-r*d+c*u}return void 0!==o&&void 0!==s||console.log("getDeltaWithResizeMode error: unexpected undefined value",o,s),{deltaX:o,deltaY:s}},getOriginChangeWithResizeMode:function(e,t,n){switch(n){case"se":case"e":case"s":e=0,t=0;break;case"ne":case"n":e=0;break;case"sw":case"w":t=0}return{originChangeX:e,originChangeY:t}},getAnchorWithMode:function(e){var t="top-left";switch(e){case"nw":t="bottom-right";break;case"ne":t="bottom-left";break;case"sw":t="top-right"}return t}}},2180:function(e,t){e.exports={getDeltaWithResizeMode:function(e,t,n){var a=e,i=t;switch(n){case"nw":a=a?-a:a,i=i?-i:i;break;case"ne":i=i?-i:i;break;case"sw":a=a?-a:a;break;case"w":a=a?-a:0,i=0;break;case"e":a=a||0,i=0;break;case"n":a=0,i=i?-i:0;break;case"s":a=0,i=i||0}return{deltaX:a,deltaY:i}},getOriginChangeWithResizeMode:function(e,t,n){switch(n){case"se":case"e":case"s":e=0,t=0;break;case"ne":case"n":e=0;break;case"sw":case"w":t=0}return{originChangeX:e,originChangeY:t}},getAnchorWithMode:function(e){var t="top-left";switch(e){case"nw":t="bottom-right";break;case"ne":t="bottom-left";break;case"sw":t="top-right"}return t}}},2181:function(e,t,n){var a={map:n(765),find:n(1081),isEqual:n(900)},i=n(2182),o=n(2189),s=n(2190),r=n(2191),c=function(e){return a.map(e,(function(e){return e.reportFormat}))};e.exports={getStackFromConfig:function(e){return a.map(e,(function(e){return"svg"===e.type?new i(e):"text"===e.type?new o(e):"line"===e.type?new s(e):"shape"===e.type?new r(e):void 0}))},getReportFormatStack:c,inheritCacheFromOldStack:function(e,t){return a.map(e,(function(e){if("text"===e.type){var n=a.find(t,{id:e.id});n&&(e.cachedData=n.cachedData)}return e}))},isSameStack:function(e,t){var n=c(e),i=c(t),o=!0;if(n.length===i.length)for(var s=0;s<n.length;s++){var r=n[s],l=i[s];if(!a.isEqual(r,l)){o=!1;break}}else o=!1;return o}}},2182:function(e,t,n){var a=n(1637),i=n(1638),o=n(1652),s=n(1653),r=n(1654);e.exports=function(e){"use strict";o(n,e);var t=s(n);function n(){return a(this,n),t.apply(this,arguments)}return i(n,[{key:"reportFormat",get:function(){return{id:this.id,type:this.type,data:this.data,frame:this.frame,transform:this.transform}}}]),n}(r)},2189:function(e,t,n){var a=n(1637),i=n(1638),o=n(1652),s=n(1653),r={pick:n(1167)},c=n(1654);e.exports=function(e){"use strict";o(n,e);var t=s(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,n),(e=t.call(this,i)).cachedData=i.cachedData||{},e}return i(n,[{key:"coreData",get:function(){return r.pick(this.data,["text","fontSize","letterSpacing","fontUrl","font"])}},{key:"reportFormat",get:function(){return{id:this.id,type:this.type,data:this.data,frame:this.frame,transform:this.transform}}}]),n}(c)},2190:function(e,t,n){var a=n(1637),i=n(1638),o=n(1652),s=n(1653),r=n(1654);e.exports=function(e){"use strict";o(n,e);var t=s(n);function n(){return a(this,n),t.apply(this,arguments)}return i(n,[{key:"reportFormat",get:function(){return{id:this.id,type:this.type,data:this.data,frame:this.frame,transform:this.transform}}}]),n}(r)},2191:function(e,t,n){var a=n(1637),i=n(1638),o=n(1652),s=n(1653),r=n(1654);e.exports=function(e){"use strict";o(n,e);var t=s(n);function n(){return a(this,n),t.apply(this,arguments)}return i(n,[{key:"reportFormat",get:function(){return{id:this.id,type:this.type,data:this.data,frame:this.frame,transform:this.transform}}}]),n}(r)},2192:function(e,t,n){},2208:function(e,t,n){},2212:function(e,t,n){},2213:function(e,t,n){},2214:function(e,t,n){},2216:function(e,t,n){},2217:function(e,t,n){},2218:function(e,t,n){},2219:function(e,t,n){},2220:function(e,t,n){},2221:function(e,t,n){},2222:function(e,t,n){},2229:function(e,t,n){},2230:function(e,t,n){},2231:function(e,t,n){},2232:function(e,t,n){}}]);